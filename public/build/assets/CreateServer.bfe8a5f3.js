import{A as k}from"./AppLayout.5d858a44.js";import{L as U}from"./LoadingButton.64cf8154.js";import{X as P}from"./XInput.0385b751.js";import{X as q}from"./XSelect.8bee4d5e.js";import{X as C}from"./XCheckbox.efd711f8.js";import{_ as A,p as a,o as m,c as g,w as y,b as t,a as l,t as i,l as L,x as _,z as p,n as T,e as d,d as u,F as E,f as b}from"./app.304209a1.js";const F={components:{XCheckbox:C,XSelect:q,AppLayout:k,LoadingButton:U,XInput:P},props:{versionsArray:Array},data(){return{form:this.$inertia.form({connection_type:"sftp",storage_server_host:"",storage_server_port:"",storage_server_username:"",storage_server_password:"",storage_server_root:"",storage_server_key:"",storage_server_ssl:!1,name:null,join_port:null,query_port:null,webquery_port:null,level_name:null,minecraft_version:null,type:null,hostname:null,ip_address:null,is_stats_tracking_enabled:!0,is_ingame_chat_enabled:!0,is_online_players_query_enabled:!0,settings:{plugins:{essentials:!1}}}),isPrefetchSuccessful:!1,prefetchError:null,fetchLoading:!1,serverStatus:null,typeArray:{0:"Paper",1:"Spigot",2:"Forge",3:"Bukkit",4:"Vanilla"}}},methods:{prefetch(){this.prefetchError=null,this.fetchLoading=!0,axios.post(route("admin.server.prefetch"),this.form).then(r=>{if(this.form.name=r.data.data.motd,this.form.join_port=r.data.data["server-port"],this.form.query_port=r.data.data["query.port"],this.form.level_name=r.data.data["level-name"],this.form.hostname=r.data.data["server-ip"]+":"+r.data.data["server-port"],this.form.ip_address=r.data.data["server-ip"],this.isPrefetchSuccessful=!0,this.serverStatus=r.data.server_status,this.serverStatus){let o=0;this.versionsArray.forEach(h=>{r.data.server_status.version.name.indexOf(h)>=0&&(this.form.minecraft_version=this.versionsArray[o]),o++})}this.fetchLoading=!1},r=>{this.prefetchError=r.response.data.message,this.fetchLoading=!1})},addServer(){!this.isPrefetchSuccessful||this.form.post(route("admin.server.store"),{preserveScroll:!0})}}},j={class:"py-12 px-10 max-w-6xl mx-auto"},B={class:"flex justify-between mb-8"},N={class:"font-bold text-3xl text-gray-500 dark:text-gray-300"},X={class:"mt-10 sm:mt-0"},I={class:"md:grid md:grid-cols-3 md:gap-6"},z={class:"md:col-span-1"},H={class:"px-4 sm:px-0"},M={class:"text-lg font-medium leading-6 text-gray-900 dark:text-gray-400"},O={class:"mt-1 text-sm text-gray-600 dark:text-gray-500"},D={class:"mt-5 md:mt-0 md:col-span-2"},J={class:"shadow overflow-hidden sm:rounded-md"},W={class:"px-4 py-5 bg-white dark:bg-cool-gray-800 sm:p-6"},G={class:"grid grid-cols-6 gap-6"},Q={class:"col-span-6 sm:col-span-6"},R={class:"col-span-6 sm:col-span-4"},K={class:"col-span-6 sm:col-span-2"},Y={class:"col-span-6 sm:col-span-2"},Z={class:"col-span-6 sm:col-span-2"},$={class:"flex items-center col-span-6 sm:col-span-4"},ee={class:"col-span-6 sm:col-span-3"},re={class:"col-span-6 sm:col-span-3"},oe={class:"col-span-6 sm:col-span-2"},se={class:"col-span-6 sm:col-span-2"},le={class:"col-span-6 sm:col-span-2"},te={class:"col-span-6 sm:col-span-2"},ne={class:"col-span-6 sm:col-span-2"},ie={class:"col-span-6 sm:col-span-2"},ae={class:"col-span-6 sm:col-span-2"},me={class:"flex items-center col-span-6 sm:col-span-4"},_e={class:"flex items-center col-span-6 sm:col-span-4"},pe={class:"flex items-center col-span-6 sm:col-span-4"},de={class:"flex items-center col-span-6 sm:col-span-4"},ce={class:"px-4 py-3 bg-gray-50 dark:bg-cool-gray-800 sm:px-6 flex justify-between"},ue={key:0,class:"text-green-600 bg-green-100 px-4 rounded flex items-center"},fe={key:1,class:"text-yellow-600 bg-yellow-100 px-4 rounded flex items-center"},he=["disabled"],ve={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ye=l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),ge=l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),be=[ye,ge],xe={key:2,class:"text-red-600 bg-red-100 px-4 rounded flex items-center"};function Ve(r,o,h,we,e,f){const x=a("app-head"),V=a("inertia-link"),v=a("x-select"),n=a("x-input"),c=a("x-checkbox"),w=a("loading-button"),S=a("app-layout");return m(),g(S,null,{default:y(()=>[t(x,{title:r.__("Add New Server")},null,8,["title"]),l("div",j,[l("div",B,[l("h1",N,i(r.__("Add Server")),1),t(V,{href:r.route("admin.server.index"),class:"inline-flex items-center px-4 py-2 bg-gray-400 dark:bg-gray-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-500 active:bg-gray-600 focus:outline-none focus:border-gray-500 focus:shadow-outline-gray transition ease-in-out duration-150"},{default:y(()=>[l("span",null,i(r.__("Cancel")),1)]),_:1},8,["href"])]),l("div",X,[l("div",I,[l("div",z,[l("div",H,[l("h3",M,i(r.__("Overview")),1),l("p",O,i(r.__("Just enter FTP / SFTP Information and Check FETCH. Manually fill the part which are not able to be fetch.  All sensitive information will be encrypted.")),1)])]),l("div",D,[l("form",{onSubmit:o[21]||(o[21]=L((...s)=>f.addServer&&f.addServer(...s),["prevent"]))},[l("div",J,[l("div",W,[l("div",G,[l("div",Q,[t(v,{id:"connection_type",modelValue:e.form.connection_type,"onUpdate:modelValue":o[0]||(o[0]=s=>e.form.connection_type=s),name:"connection_type",error:e.form.errors.connection_type,label:r.__("Connection Type"),"select-list":{sftp:r.__("SFTP - Secure File Transfer Protocol"),ftp:r.__("FTP - File Transfer Protocol"),local:r.__("Local - Locally stored at server location")}},null,8,["modelValue","error","label","select-list"])]),_(l("div",R,[t(n,{id:"storage_server_host",modelValue:e.form.storage_server_host,"onUpdate:modelValue":o[1]||(o[1]=s=>e.form.storage_server_host=s),label:r.__(":connection_type Server Host",{connection_type:e.form.connection_type.toUpperCase()}),error:e.form.errors.storage_server_host,type:"text",name:"storage_server_host","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])],512),[[p,e.form.connection_type!=="local"]]),_(l("div",K,[t(n,{id:"storage_server_port",modelValue:e.form.storage_server_port,"onUpdate:modelValue":o[2]||(o[2]=s=>e.form.storage_server_port=s),label:r.__(":connection_type Port",{connection_type:e.form.connection_type.toUpperCase()}),error:e.form.errors.storage_server_port,type:"text",name:"storage_server_port","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])],512),[[p,e.form.connection_type!=="local"]]),_(l("div",Y,[t(n,{id:"storage_server_username",modelValue:e.form.storage_server_username,"onUpdate:modelValue":o[3]||(o[3]=s=>e.form.storage_server_username=s),label:r.__("Username"),error:e.form.errors.storage_server_username,type:"text",name:"storage_server_username","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])],512),[[p,e.form.connection_type!=="local"]]),_(l("div",Z,[t(n,{id:"storage_server_password",modelValue:e.form.storage_server_password,"onUpdate:modelValue":o[4]||(o[4]=s=>e.form.storage_server_password=s),label:r.__("Password"),error:e.form.errors.storage_server_password,type:"text",name:"storage_server_password","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])],512),[[p,e.form.connection_type!=="local"]]),l("div",{class:T(["col-span-6",e.form.connection_type==="local"?"sm:col-span-6":"sm:col-span-2"])},[t(n,{id:"storage_server_root",modelValue:e.form.storage_server_root,"onUpdate:modelValue":o[5]||(o[5]=s=>e.form.storage_server_root=s),label:r.__("Server Root Path"),error:e.form.errors.storage_server_root,type:"text",name:"storage_server_root","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])],2),l("div",$,[e.form.connection_type==="ftp"?(m(),g(c,{key:0,id:"storage_server_ssl",modelValue:e.form.storage_server_ssl,"onUpdate:modelValue":o[6]||(o[6]=s=>e.form.storage_server_ssl=s),label:r.__("SSL"),help:r.__("Check if FTP connection should be made using SSL"),name:"is_ingame_chat_enabled"},null,8,["modelValue","label","help"])):d("",!0)]),e.isPrefetchSuccessful?(m(),u(E,{key:0},[l("div",ee,[t(n,{id:"name",modelValue:e.form.name,"onUpdate:modelValue":o[7]||(o[7]=s=>e.form.name=s),label:r.__("Server Name"),error:e.form.errors.name,type:"text",name:"name","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])]),l("div",re,[t(n,{id:"hostname",modelValue:e.form.hostname,"onUpdate:modelValue":o[8]||(o[8]=s=>e.form.hostname=s),label:r.__("Hostname"),error:e.form.errors.hostname,type:"text",name:"hostname","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])]),l("div",oe,[t(n,{id:"ip_address",modelValue:e.form.ip_address,"onUpdate:modelValue":o[9]||(o[9]=s=>e.form.ip_address=s),label:r.__("IP Address"),error:e.form.errors.ip_address,autocomplete:"ip_address",type:"text",name:"ip_address","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])]),l("div",se,[t(n,{id:"join_port",modelValue:e.form.join_port,"onUpdate:modelValue":o[10]||(o[10]=s=>e.form.join_port=s),label:r.__("Join Port"),error:e.form.errors.join_port,type:"text",name:"join_port","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])]),l("div",le,[t(n,{id:"query_port",modelValue:e.form.query_port,"onUpdate:modelValue":o[11]||(o[11]=s=>e.form.query_port=s),label:r.__("Query Port"),error:e.form.errors.query_port,type:"text",name:"query_port","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])]),l("div",te,[t(n,{id:"webquery_port",modelValue:e.form.webquery_port,"onUpdate:modelValue":o[12]||(o[12]=s=>e.form.webquery_port=s),label:r.__("Webquery Port"),error:e.form.errors.webquery_port,type:"text",name:"webquery_port","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])]),l("div",ne,[t(n,{id:"level_name",modelValue:e.form.level_name,"onUpdate:modelValue":o[13]||(o[13]=s=>e.form.level_name=s),label:r.__("Level/World Name"),error:e.form.errors.level_name,type:"text",name:"level_name","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])]),l("div",ie,[t(v,{id:"type",modelValue:e.form.type,"onUpdate:modelValue":o[14]||(o[14]=s=>e.form.type=s),placeholder:r.__("Select server type"),"disable-null":!0,required:!0,name:"type",error:e.form.errors.type,label:r.__("Server Type"),"select-list":e.typeArray},null,8,["modelValue","placeholder","error","label","select-list"])]),l("div",ae,[t(v,{id:"minecraft_version",modelValue:e.form.minecraft_version,"onUpdate:modelValue":o[15]||(o[15]=s=>e.form.minecraft_version=s),name:"minecraft_version",error:e.form.errors.minecraft_version,label:r.__("Version"),"select-list":h.versionsArray},null,8,["modelValue","error","label","select-list"])]),l("div",me,[t(c,{id:"settings_plugin_essentials",modelValue:e.form.settings.plugins.essentials,"onUpdate:modelValue":o[16]||(o[16]=s=>e.form.settings.plugins.essentials=s),label:r.__("Plugin: Essentials"),help:r.__("Tick if there is Essentials/EssentialsX installed in your server."),name:"settings_plugin_essentials"},null,8,["modelValue","label","help"])]),l("div",_e,[t(c,{id:"is_stats_tracking_enabled",modelValue:e.form.is_stats_tracking_enabled,"onUpdate:modelValue":o[17]||(o[17]=s=>e.form.is_stats_tracking_enabled=s),label:r.__("Track Player Stats of this Server"),help:r.__("Fetch user stats and use it for calculation of ranks and other stuffs. Uncheck if this you dont want to track this server."),name:"is_stats_tracking_enabled"},null,8,["modelValue","label","help"])]),l("div",pe,[t(c,{id:"is_ingame_chat_enabled",modelValue:e.form.is_ingame_chat_enabled,"onUpdate:modelValue":o[18]||(o[18]=s=>e.form.is_ingame_chat_enabled=s),label:r.__("Enable In-Game Chat of this Server"),help:r.__("Let user from website see and send chat to server."),name:"is_ingame_chat_enabled"},null,8,["modelValue","label","help"])]),l("div",de,[t(c,{id:"is_online_players_query_enabled",modelValue:e.form.is_online_players_query_enabled,"onUpdate:modelValue":o[19]||(o[19]=s=>e.form.is_online_players_query_enabled=s),label:r.__("Show online player list of this Server"),help:r.__("If enabled show list of online players on this server near ingamechat."),name:"is_online_players_query_enabled"},null,8,["modelValue","label","help"])])],64)):d("",!0)])]),l("div",ce,[e.isPrefetchSuccessful&&e.serverStatus?(m(),u("div",ue,i(r.__(":connection_type connection successful & Server is Online.",{connection_type:e.form.connection_type.toUpperCase()})),1)):d("",!0),e.isPrefetchSuccessful&&!e.serverStatus?(m(),u("div",fe,i(r.__(":connection_type connection successful but Server is offline.",{connection_type:e.form.connection_type.toUpperCase()})),1)):d("",!0),_(l("button",{id:"prefetch",disabled:e.fetchLoading,type:"button",class:"mr-2 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-light-blue-500 hover:bg-light-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-light-blue-500 disabled:opacity-50",onClick:o[20]||(o[20]=(...s)=>f.prefetch&&f.prefetch(...s))},[e.fetchLoading?(m(),u("svg",ve,be)):d("",!0),b(" "+i(r.__("Test Connection")),1)],8,he),[[p,!e.isPrefetchSuccessful]]),e.prefetchError?(m(),u("div",xe,i(e.prefetchError),1)):d("",!0),_(t(w,{loading:e.form.processing,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-light-blue-500 hover:bg-light-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-light-blue-500 disabled:opacity-50",type:"submit"},{default:y(()=>[b(i(r.__("Add Server")),1)]),_:1},8,["loading"]),[[p,e.isPrefetchSuccessful]])])])],32)])])])])]),_:1})}const Ae=A(F,[["render",Ve]]);export{Ae as default};
