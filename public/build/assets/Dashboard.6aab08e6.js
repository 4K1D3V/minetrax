import{u as U,I as O,E as te,f as se,A as oe}from"./AppLayout.0c3349eb.js";import{N as re}from"./NewsBox.362a9101.js";import{S as ne}from"./ShoutBox.5e06a6cd.js";import{_ as ae,D as le}from"./DidYouKnowBox.a9442577.js";import{_ as P,o as n,d as l,a as t,t as r,b as g,w as b,Y as Q,s as x,f as p,e as u,l as h,q as T,F as A,g as $,n as j,r as M,h as ie,y as ce,z as de,u as k,c as w,K as D,ab as N,a0 as ue,x as E,j as V,v as _e,k as he,Z as ge}from"./app.50c0f8cb.js";import{S as ye,P as me}from"./SocialChannelBox.b0d4bc77.js";import{_ as F}from"./AlertCard.b7875689.js";import{_ as pe}from"./DialogModal.ad0ce799.js";import{_ as fe}from"./SecondaryButton.470bea54.js";import{L as be}from"./LoadingButton.2b1ddc6f.js";import{u as H}from"./useAuthorizable.b252bfcc.js";import{S as ve}from"./ServerStatusBox.71543cd7.js";import{P as xe}from"./PollBox.db406541.js";import{_ as ke}from"./CopyToClipboard.4358cfcf.js";import{L as we}from"./LoadingSpinner.39f2bf8a.js";import"./InfiniteScroll.14473fd1.js";import"./InputError.39c60024.js";import"./Post.3bd95f74.js";import"./UserDisplayname.88595ced.js";import"./XMarkIcon.a268be53.js";import"./Modal.a9009b5a.js";const Se={props:{user:Object,enabled:Boolean},setup(){const{formatTimeAgoToNow:e,formatToDayDateString:a}=U();return{formatTimeAgoToNow:e,formatToDayDateString:a}}},Le={key:0},Pe={class:"p-3 bg-white dark:bg-cool-gray-800 rounded shadow space-y-2"},Ce={class:"font-extrabold text-gray-800 dark:text-gray-200"},Ae=["src"],$e={class:"flex flex-col"},Ie={class:"break-all"},Te={class:"text-gray-500 dark:text-gray-400"},Me=["title"];function je(e,a,s,i,o,d){const m=h("inertia-link"),y=T("tippy");return s.enabled&&s.user?(n(),l("div",Le,[t("div",Pe,[t("h3",Ce,r(e.__("Newest User")),1),g(m,{as:"div",href:e.route("user.public.get",s.user.username),class:"cursor-pointer flex space-x-2 border dark:border-gray-700 rounded-tl-md rounded-tr-xl rounded-b-3xl p-2 items-center hover:border-light-blue-400 dark:hover:border-light-blue-400"},{default:b(()=>[t("img",{class:"w-14 h-14 rounded-full",src:s.user.profile_photo_url,alt:"Avatar"},null,8,Ae),t("div",$e,[t("div",Ie,[t("span",{class:"text-gray-800 dark:text-gray-300 font-semibold",style:Q([s.user.roles[0].color?{color:s.user.roles[0].color}:null])},r(s.user.name),5),t("span",Te,"@"+r(s.user.username),1)]),x((n(),l("span",{class:"text-sm text-gray-700 dark:text-gray-500 focus:outline-none",title:i.formatToDayDateString(s.user.created_at)},[p(r(e.__("Joined"))+"\xA0"+r(i.formatTimeAgoToNow(s.user.created_at)),1)],8,Me)),[[y]])])]),_:1},8,["href"])])])):u("",!0)}const Be=P(Se,[["render",je]]),De={props:{votingsites:Array,enabled:Boolean}},Ne={key:0},Ee={class:"p-3 bg-white dark:bg-cool-gray-800 rounded shadow space-y-2"},Qe={class:"font-extrabold text-gray-800 dark:text-gray-200"},Ue={class:"rounded text-sm text-gray-600 dark:text-gray-400 text-center p-1"},Ve={class:"flex flex-col space-y-2"},Oe=["content"],Fe=["href"];function He(e,a,s,i,o,d){const m=T("tippy");return s.enabled&&s.votingsites&&s.votingsites.length>0?(n(),l("div",Ne,[t("div",Ee,[t("h3",Qe,r(e.__("Vote for Server")),1),t("p",Ue,r(e.__("Vote on these sites and win rewards!")),1),t("div",Ve,[(n(!0),l(A,null,$(s.votingsites,(y,v)=>(n(),l("div",{key:v,class:"rounded flex justify-between items-center p-2 bg-gray-100 dark:bg-cool-gray-900"},[x((n(),l("div",{content:y.url,class:"text-gray-500 dark:text-gray-300 text-sm font-bold focus:outline-none"},[p(r(y.name),1)],8,Oe)),[[m]]),t("div",null,[t("a",{target:"_blank",class:"rounded tracking-wider text-sm px-2 py-1 text-gray-500 dark:text-gray-300 bg-white dark:bg-cool-gray-800 shadow hover:shadow-md",href:y.url},r(e.__("Vote")),9,Fe)])]))),128))])])])):u("",!0)}const ze=P(De,[["render",He]]),qe={props:["htmlData"]},We={key:0},Ye={class:"bg-white dark:bg-cool-gray-800 rounded px-4 py-3 shadow"},Ke=["innerHTML"];function Je(e,a,s,i,o,d){return s.htmlData?(n(),l("div",We,[t("div",Ye,[t("div",{class:"prose dark:prose-dark max-w-none text-center",innerHTML:s.htmlData},null,8,Ke)])])):u("",!0)}const Ge=P(qe,[["render",Je]]),Re={components:{Icon:O},props:{newslist:Array},setup(){const{formatTimeAgoToNow:e,formatToDayDateString:a}=U();return{formatTimeAgoToNow:e,formatToDayDateString:a}}},Ze={key:0,class:"space-y-4"},Xe={class:"p-3 sm:px-5"},et={class:"text-xl"},tt={class:"mb-1"},st=["content"],ot={class:"text-sm text-gray-500 dark:text-gray-400 font-light leading-snug"},rt=["innerHTML"],nt=["src"];function at(e,a,s,i,o,d){const m=h("icon"),y=h("inertia-link"),v=T("tippy");return s.newslist&&s.newslist.length>0?(n(),l("div",Ze,[(n(!0),l(A,null,$(s.newslist,_=>(n(),l("div",{key:_.id,class:"bg-white dark:bg-cool-gray-800 rounded shadow flex justify-between"},[t("div",Xe,[t("div",et,[t("p",tt,[x(g(m,{title:e.__("Pinned News"),class:"inline text-gray-400 focus:outline-none",name:"paper-clip"},null,8,["title"]),[[v]]),t("span",{class:j(["font-semibold uppercase text-sm tracking-wider",{"text-light-blue-400":_.type.value===0,"text-orange-500":_.type.value===1,"text-green-500":_.type.value===2}])},"\xA0"+r(_.type.key)+"\xA0",3),x((n(),l("span",{content:i.formatToDayDateString(_.published_at),class:"focus:outline-none text-sm text-gray-500 dark:text-gray-400 font-light leading-snug"},[p(r(i.formatTimeAgoToNow(_.published_at)),1)],8,st)),[[v]]),t("span",ot," - "+r(_.time_to_read)+" read",1)]),g(y,{href:e.route("news.show",_.slug),class:"hover:text-light-blue-400 dark:text-gray-200 dark:hover:text-light-blue-400 duration-200"},{default:b(()=>[p(r(_.title),1)]),_:2},1032,["href"])]),t("div",{class:"mt-3 text-gray-500 dark:text-gray-400",innerHTML:_.body_md},null,8,rt)]),_.photo_url?(n(),l("img",{key:0,class:"h-auto w-2/5 object-cover object-center",src:_.photo_url,alt:"News Image"},null,8,nt)):u("",!0)]))),128))])):u("",!0)}const lt=P(Re,[["render",at]]),it={components:{AlertCard:F},data(){return{response:{},loading:!0}},created(){axios.get(route("version.check")).then(e=>{this.response=e.data}).finally(()=>{this.loading=!1})}},ct={key:0,ref:"box"},dt={class:"text-gray-700 dark:text-gray-200"},ut={class:"text-red-500"},_t={class:"text-green-500"},ht=t("br",null,null,-1),gt={class:"text-light-blue-500 hover:underline",target:"_blank",href:"https://minetrax.github.io/docs/upgrade"},yt={class:"text-xs text-gray-500 italic mt-2"};function mt(e,a,s,i,o,d){const m=h("AlertCard");return!o.loading&&o.response&&o.response.is_uptodate===!1?(n(),l("div",ct,[g(m,{"text-color":"text-red-800 dark:text-red-500","border-color":"border-red-500"},{body:b(()=>[t("div",dt,[p(r(e.__("Your current MineTrax version is"))+"\xA0",1),t("span",ut,r(o.response.my_version),1),p("\xA0"+r(e.__("while the latest version is"))+"\xA0",1),t("span",_t,r(o.response.latest_version),1),p(". "+r(e.__("Please upgrade to enjoy latest features."))+" ",1),ht,t("a",gt,r(e.__("Click here to know more.")),1),t("p",yt,r(e.__("Note: This box is only visible to Staff Member")),1)])]),default:b(()=>[p(r(e.__("Your MineTrax Version is Outdated!"))+" ",1)]),_:1})],512)):u("",!0)}const pt=P(it,[["render",mt]]),ft={key:0},bt={class:"p-3 sm:px-5 bg-white dark:bg-gray-800 rounded shadow"},vt={class:"font-extrabold text-gray-800 dark:text-gray-200"},xt={key:0,class:"float-right text-green-500 font-semibold"},kt={key:0},wt={key:1},St={key:0,class:"flex p-4 justify-center"},Lt=t("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-light-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Pt=[Lt],Ct={key:2,class:"mt-3 text-gray-500 flex flex-wrap justify-center"},At=["title","src","alt"],$t={key:3,class:"italic p-1 rounded text-center text-gray-400"},It={__name:"OnlinePlayersBox",props:{server:{type:Object}},setup(e){const a=e;let s=M({}),i=M({}),o=M(!0),d=M(null),m=M("w-5 h-5"),y=null;function v(){let c=!1,f=a.server;f||(f=D().props.defaultQueryServer.server,c=D().props.defaultQueryServer.shouldUseWebQuery),c?L(f):_(f)}function _(c){axios.get(route("server.query.get",c.id)).then(f=>{s.value=f.data.server_info,i.value=f.data.players_list;for(let S in i.value)i.value[S]||(i.value[S]="00000000-0000-0000-0000-000000000000");d.value=null,Object.keys(i.value).length<=5&&(m.value="w-8 h-8")}).catch(f=>{d.value=f.response.data.message||f.message,s.value=null,i.value=null}).finally(()=>{o.value=!1})}function L(c){axios.get(route("server.webquery.get",c.id)).then(f=>{f.data.length>0?i.value=f.data.reduce((S,I)=>(S[I.username]=I.id,S),{}):i.value=[],s.value={Players:Object.keys(i.value).length},d.value=null,Object.keys(i.value).length<=5&&(m.value="w-8 h-8")}).catch(f=>{d.value=f.response.data.message||f.message,s.value=null,i.value=null}).finally(()=>{o.value=!1})}let C=ie(()=>D().props.generalSettings.enable_mcserver_onlineplayersbox?!!(a.server||D().props.defaultQueryServer.server):!1);return ce(()=>{!C.value||(v(),y=setInterval(()=>v(),1e4))}),de(()=>{clearInterval(y)}),(c,f)=>{const S=T("tippy");return k(C)?(n(),l("div",ft,[t("div",bt,[t("h3",vt,[p(r(c.__("Online Players"))+" ",1),!k(o)&&!k(d)?(n(),l("span",xt,[k(s).MaxPlayers?(n(),l("span",kt,r(k(s).Players)+" / "+r(k(s).MaxPlayers),1)):(n(),l("span",wt,r(k(s).Players)+" "+r(c.__("online")),1))])):u("",!0)]),k(o)?(n(),l("div",St,Pt)):u("",!0),k(d)?(n(),w(te,{key:1},{default:b(()=>[p(r(k(d)),1)]),_:1})):u("",!0),!k(o)&&!k(d)?(n(),l("div",Ct,[(n(!0),l(A,null,$(k(i),(I,B)=>(n(),l("div",{key:I,class:j(["flex-shrink-0 mr-1 mb-1",k(m)])},[x(t("img",{title:B,src:c.route("player.avatar.get",{uuid:I,username:B,size:50}),alt:B,class:j(["focus:outline-none",k(m)])},null,10,At),[[S]])],2))),128))])):u("",!0),!k(d)&&(!k(i)||k(i).length<=0)?(n(),l("div",$t,r(c.__("No players online.")),1)):u("",!0)])])):u("",!0)}}},Tt={components:{Icon:O,JetDialogModal:pe,JetSecondaryButton:fe,LoadingButton:be},props:{defaultServerId:Number,serverList:Array},setup(){const{can:e}=H(),{formatToDayDateString:a}=U();return{can:e,formatToDayDateString:a}},data(){return{serverId:this.defaultServerId,chatLogs:[],message:"",loading:!0,error:null,sending:!1,playersList:[],playersListLoading:!0,shouldDisplayPlayerList:!0,playerListQueryInterval:null,showAdminPlayerActionModel:!1,actionModelCurrentPlayer:null,adminPlayerActionLoading:!1,adminPlayerActionError:null,format:se,isWebQuerySuccess:!1,chatListQueryInterval:null}},computed:{enabled(){return this.$page.props.generalSettings.enable_ingamechat?!!this.defaultServerId:!1}},watch:{serverId:function(e,a){N?Echo.leaveChannel("chatlogs."+a):clearInterval(this.chatListQueryInterval),this.serverId=e,this.getChatListForServer(e),clearInterval(this.playerListQueryInterval),this.getPlayerListForServer(e),this.playerListQueryInterval=setInterval(()=>this.getPlayerListForServer(e),1e4)}},created(){!this.enabled||(this.getChatListForServer(this.serverId),this.getPlayerListForServer(this.serverId),this.playerListQueryInterval=setInterval(()=>this.getPlayerListForServer(this.serverId),1e4))},unmounted(){N?Echo.leave("chatlogs."+this.serverId):clearInterval(this.chatListQueryInterval),clearInterval(this.playerListQueryInterval)},methods:{postSendMessage(){this.sending=!0,this.error=null,axios.post(route("chatlog.send",this.serverId),{message:this.message}).then(()=>{}).catch(e=>{e.response.status===422?this.error=Object.values(e.response.data.errors)[0][0]:e.response.status===403?this.error=e.response.data.message:this.error=e.response.statusText}).finally(()=>{this.message="",this.sending=!1,this.$nextTick(()=>{this.$refs.inputbox.focus(),this.pollServerForNewChat(this.serverId)})})},getChatListForServer(e){this.loading=!0,this.chatLogs=[],axios.get(route("chatlog.index",e)).then(a=>{this.chatLogs=a.data.reverse()}).finally(()=>{this.loading=!1,this.$nextTick(()=>{let a=this.$el.querySelector("#chatbox").scrollHeight;this.$el.querySelector("#chatbox").scrollTo(0,a)})}),N?Echo.channel("chatlogs."+e).listen("ServerChatlogCreated",a=>{this.chatLogs.push(a.data),this.$nextTick(()=>{let s=this.$el.querySelector("#chatbox").scrollHeight;this.$el.querySelector("#chatbox").scrollTo(0,s)})}):this.chatListQueryInterval=setInterval(()=>this.pollServerForNewChat(this.serverId),6e3)},pollServerForNewChat(e){if(N)return;let a=this.chatLogs.length>0?this.chatLogs[this.chatLogs.length-1].id:0;axios.get(route("chatlog.index",{server:e,after:a})).then(s=>{const i=s.data.reverse();i.length>0&&(this.chatLogs=this.chatLogs.concat(i),this.$nextTick(()=>{let o=this.$el.querySelector("#chatbox").scrollHeight;this.$el.querySelector("#chatbox").scrollTo(0,o)}))})},getPlayerListForServer(e){axios.get(route("server.webquery.get",e)).then(a=>{this.playersList=a.data,this.isWebQuerySuccess=!0}).catch(()=>{this.shouldDisplayPlayerList=!1,this.isWebQuerySuccess=!1}).finally(()=>{this.playersListLoading=!1})},openAdminPlayerActionModel(e){this.showAdminPlayerActionModel=!0,this.actionModelCurrentPlayer=e},closeAdminPlayerActionModel(){this.showAdminPlayerActionModel=!1,this.actionModelCurrentPlayer=null},sendCommandToServer(e){this.adminPlayerActionLoading=!0;let a=null,s={type:null,params:null,context:null};switch(e){case"kill":s.type="kill",s.params=this.actionModelCurrentPlayer.username,s.context="player";break;case"mute":if(a=prompt(this.__("Give any reason if muting? Note: ALWAYS LEAVE IT BLANK IF UN-MUTING")),a===null)break;s.type="mute",a?s.params=this.actionModelCurrentPlayer.username+" "+a:s.params=this.actionModelCurrentPlayer.username,s.context="player";break;case"kick":if(a=prompt(this.__("Any reason for kicking this player?")),a===null)break;s.type="kick",s.params=this.actionModelCurrentPlayer.username+" "+a,s.context="player";break;case"ban":if(a=prompt(this.__("Any reason for banning this player?")),a===null)break;s.type="ban",s.params=this.actionModelCurrentPlayer.username+" "+a,s.context="player";break}if(s.type===null){this.adminPlayerActionLoading=!1;return}axios.post(route("admin.server.command",this.serverId),s).then(()=>{this.closeAdminPlayerActionModel()}).catch(i=>{this.adminPlayerActionError=i.message}).finally(()=>{this.adminPlayerActionLoading=!1})}}},Mt={key:0},jt={class:"p-3 bg-white rounded shadow sm:px-5 dark:bg-cool-gray-800"},Bt={class:"flex justify-between"},Dt={class:"font-extrabold text-gray-800 dark:text-gray-200"},Nt=["value"],Et={class:"flex flex-col"},Qt={key:0,class:"space-y-2"},Ut=he('<div class="w-full"><div class="flex space-x-4 animate-pulse"><div class="flex-1 py-1 space-y-1"><div class="w-3/4 h-4 bg-gray-300 rounded dark:bg-cool-gray-700"></div><div class="w-5/6 h-4 bg-gray-300 rounded dark:bg-cool-gray-700"></div></div></div></div><div class="w-full"><div class="flex space-x-4 animate-pulse"><div class="flex-1 py-1 space-y-1"><div class="w-3/4 h-4 bg-gray-300 rounded dark:bg-cool-gray-700"></div><div class="w-5/6 h-4 bg-gray-300 rounded dark:bg-cool-gray-700"></div></div></div></div><div class="w-full"><div class="flex space-x-4 animate-pulse"><div class="flex-1 py-1 space-y-1"><div class="w-3/4 h-4 bg-gray-300 rounded dark:bg-cool-gray-700"></div><div class="w-5/6 h-4 bg-gray-300 rounded dark:bg-cool-gray-700"></div></div></div></div>',3),Vt=[Ut],Ot={id:"chat-container",class:"relative min-h-[5rem] flex flex-col-reverse justify-between p-1 mt-1 text-white bg-gray-200 rounded md:flex-row dark:bg-cool-gray-900"},Ft={id:"chatbox",class:"flex flex-col overflow-auto text-sm max-h-96 hide-scrollbar invert dark:invert-0"},Ht=["title","innerHTML"],zt={key:0,class:"flex items-center justify-center w-full h-full text-sm italic text-gray-500"},qt={id:"player-list",class:"sticky flex justify-end overflow-auto text-sm bg-white bg-opacity-100 rounded dark:bg-cool-gray-800 max-h-96 min-w-max hide-scrollbar"},Wt={class:"flex flex-col w-full space-y-1"},Yt={class:"relative flex items-center justify-center p-2 bg-gray-100 dark:bg-opacity-25 dark:bg-cool-gray-600"},Kt={class:"ml-4 mr-5 font-bold text-gray-700 dark:text-gray-200"},Jt={key:0,class:"text-sm text-center italic text-gray-500 dark:text-gray-400 pb-2 pt-1"},Gt={class:"flex space-x-1 truncate"},Rt=["src"],Zt={id:"right",class:"flex items-center justify-center space-x-1"},Xt=["title","src","alt"],es=["onClick"],ts={key:1,class:"mt-1"},ss=["disabled","placeholder"],os={key:1,class:"text-xs text-red-400"},rs={key:2,class:"flex justify-end mt-2 text-xs text-gray-500 dark:text-gray-400"},ns={key:2,class:"mt-2 text-sm text-center text-gray-600 dark:text-gray-400"},as={key:0,class:"flex flex-col items-center font-bold"},ls={class:"text-gray-800 underline"},is=["src"],cs={class:"text-light-blue-600"},ds={class:"text-xs text-gray-600"},us={class:"flex justify-center space-x-2"},_s={key:0,class:"flex justify-center p-1 mt-2 text-sm text-red-500 bg-red-100 border border-red-500"};function hs(e,a,s,i,o,d){const m=h("inertia-link"),y=h("icon"),v=h("loading-button"),_=h("jet-secondary-button"),L=h("jet-dialog-modal"),C=T("tippy");return d.enabled?(n(),l("div",Mt,[t("div",jt,[t("div",Bt,[t("h3",Dt,r(e.__("Server In-Game Chat")),1),s.serverList&&s.serverList.length>1?x((n(),l("select",{key:0,id:"serverSelector","onUpdate:modelValue":a[0]||(a[0]=c=>o.serverId=c),"aria-label":"serverSelector",name:"serverSelector",class:"text-xs border-gray-300 rounded-md shadow-sm focus:border-light-blue-300 focus:ring focus:ring-light-blue-200 focus:ring-opacity-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300"},[(n(!0),l(A,null,$(s.serverList,c=>(n(),l("option",{key:c.id,value:c.id},r(c.name),9,Nt))),128))],512)),[[ue,o.serverId]]):u("",!0)]),t("div",Et,[o.loading?(n(),l("div",Qt,Vt)):u("",!0),x(t("div",Ot,[x(t("button",{class:"absolute top-0 right-0 mt-1 mr-2 font-semibold text-green-400 z-10",type:"button",onClick:a[1]||(a[1]=c=>o.shouldDisplayPlayerList=!o.shouldDisplayPlayerList)}," [+] ",512),[[E,!o.shouldDisplayPlayerList]]),t("div",Ft,[(n(!0),l(A,null,$(o.chatLogs,c=>x((n(),l("p",{key:c.id,title:i.formatToDayDateString(c.created_at),class:"focus:outline-none",innerHTML:c.data},null,8,Ht)),[[C]])),128)),!o.chatLogs||o.chatLogs.length<=0?(n(),l("div",zt,r(e.__("No chat recorded yet!")),1)):u("",!0)]),x(t("div",qt,[t("div",Wt,[t("div",Yt,[t("h3",Kt,r(e.__("Players"))+"\xA0("+r(o.playersList.length)+") ",1),t("button",{class:"absolute right-0 mr-2 font-semibold text-red-500 dark:text-red-400 z-10",type:"button",onClick:a[2]||(a[2]=c=>o.shouldDisplayPlayerList=!o.shouldDisplayPlayerList)}," [-] ")]),!o.playersList||o.playersList.length<=0?(n(),l("div",Jt,r(e.__("No players.")),1)):u("",!0),(n(!0),l(A,null,$(o.playersList,c=>(n(),l("div",{key:c.id,class:"flex justify-between mx-1"},[t("div",Gt,[t("img",{class:"h-5",src:e.route("player.avatar.get",{uuid:c.id,username:c.username,size:50}),alt:"Player Avatar"},null,8,Rt),c.is_in_db?(n(),w(m,{key:0,href:e.route("player.show",c.id)},{default:b(()=>[t("span",{class:j(["mr-1 font-semibold truncate text-gray-800 dark:text-white",{"text-orange-500 dark:text-yellow-300":c.is_op}])},r(c.username),3)]),_:2},1032,["href"])):(n(),l("span",{key:1,class:j(["mr-1 truncate text-gray-800 dark:text-white",{"text-orange-500 dark:text-yellow-300":c.is_op}])},r(c.username),3))]),t("div",Zt,[x(t("img",{class:"h-5",title:c.country.name,src:c.country.photo_path,alt:c.country.name},null,8,Xt),[[C]]),e.$page.props.auth.user&&e.$page.props.auth.user.is_staff?(n(),l("a",{key:0,class:"text-gray-400 cursor-pointer hover:text-gray-200",href:"#",onClick:V(f=>d.openAdminPlayerActionModel(c),["prevent"])},[g(y,{name:"cog",class:"w-4 h-4"})],8,es)):u("",!0)])]))),128))])],512),[[E,!o.playersListLoading&&o.shouldDisplayPlayerList]])],512),[[E,!o.loading]]),e.$page.props.auth.user?(n(),l("div",ts,[t("form",{onSubmit:a[4]||(a[4]=V((...c)=>d.postSendMessage&&d.postSendMessage(...c),["prevent"]))},[o.loading?u("",!0):x((n(),l("input",{key:0,ref:"inputbox","onUpdate:modelValue":a[3]||(a[3]=c=>o.message=c),disabled:o.sending||!o.isWebQuerySuccess,"aria-label":"Shout",class:"block w-full mt-1 bg-gray-100 border-none rounded-md focus:ring-gray-300 dark:focus:ring-gray-700 sm:text-sm disabled:opacity-50 dark:bg-cool-gray-900 dark:text-gray-200 focus:bg-white",type:"text",placeholder:o.isWebQuerySuccess?e.__("Say something.."):e.__("Server webquery is offline")},null,8,ss)),[[_e,o.message]]),o.error?(n(),l("span",os,r(o.error),1)):u("",!0),!o.loading&&i.can("send server_custom_commands")?(n(),l("span",rs,r(e.__("Start with / to send a console command")),1)):u("",!0)],32)])):(n(),l("div",ns,[g(m,{class:"font-semibold text-light-blue-500",href:e.route("login")},{default:b(()=>[p(r(e.__("Login")),1)]),_:1},8,["href"]),e.$page.props.hasRegistrationFeature?(n(),l(A,{key:0},[p(r(" "+e.__("or"))+" ",1),g(m,{class:"font-semibold text-light-blue-500",href:e.route("register")},{default:b(()=>[p(r(e.__("Register")),1)]),_:1},8,["href"])],64)):u("",!0),p(" "+r(e.__("to chat with In-Game Players")),1)]))])]),g(L,{show:o.showAdminPlayerActionModel,onClose:d.closeAdminPlayerActionModel},{title:b(()=>[o.actionModelCurrentPlayer?(n(),l("div",as,[t("span",ls,r(e.__("Manage Player")),1),t("img",{class:"h-24 rounded",src:e.route("player.avatar.get",{uuid:o.actionModelCurrentPlayer.id,username:o.actionModelCurrentPlayer.username}),alt:"Player Avatar"},null,8,is),t("span",cs,r(o.actionModelCurrentPlayer.username),1),t("span",ds,r(o.actionModelCurrentPlayer.id),1)])):u("",!0)]),content:b(()=>[t("div",us,[i.can("kill players")?(n(),w(v,{key:0,loading:o.adminPlayerActionLoading,class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-gray-600 border border-transparent rounded-md shadow-sm hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50",type:"button",onClick:a[5]||(a[5]=c=>d.sendCommandToServer("kill"))},{default:b(()=>[p(r(e.__("Kill")),1)]),_:1},8,["loading"])):u("",!0),i.can("mute players")?(n(),w(v,{key:1,loading:o.adminPlayerActionLoading,class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-yellow-400 border border-transparent rounded-md shadow-sm hover:bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-200 disabled:opacity-50",type:"button",onClick:a[6]||(a[6]=c=>d.sendCommandToServer("mute"))},{default:b(()=>[p(r(e.__("Mute"))+" / "+r(e.__("UnMute")),1)]),_:1},8,["loading"])):u("",!0),i.can("kick players")?(n(),w(v,{key:2,loading:o.adminPlayerActionLoading,class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-yellow-600 border border-transparent rounded-md shadow-sm hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 disabled:opacity-50",type:"button",onClick:a[7]||(a[7]=c=>d.sendCommandToServer("kick"))},{default:b(()=>[p(r(e.__("Kick")),1)]),_:1},8,["loading"])):u("",!0),i.can("ban players")?(n(),w(v,{key:3,loading:o.adminPlayerActionLoading,class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-pink-600 border border-transparent rounded-md shadow-sm hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 disabled:opacity-50",type:"button",onClick:a[8]||(a[8]=c=>d.sendCommandToServer("ban"))},{default:b(()=>[p(r(e.__("Ban")),1)]),_:1},8,["loading"])):u("",!0)]),o.adminPlayerActionError?(n(),l("div",_s,r(o.adminPlayerActionError),1)):u("",!0)]),footer:b(()=>[g(_,{onClick:d.closeAdminPlayerActionModel},{default:b(()=>[p(r(e.__("Cancel")),1)]),_:1},8,["onClick"])]),_:1},8,["show","onClose"])])):u("",!0)}const gs=P(Tt,[["render",hs]]),ys={computed:{enabled(){return this.$page.props.generalSettings.enable_donation_box&&this.$page.props.generalSettings.donation_box_url},donationText(){return ge.exports.sample([this.__("Help us run our servers!"),this.__("Your help mean everything to us!"),this.__("If you are capable, we would appreciate your contribution")])}}},ms={key:0},ps={class:"p-3 sm:px-5 bg-white dark:bg-cool-gray-800 rounded shadow"},fs={class:"font-extrabold text-gray-800 dark:text-gray-200"},bs={class:"rounded text-sm text-gray-600 dark:text-gray-300 text-center p-1"},vs={class:"mt-3 text-light-blue-400 flex justify-center"},xs=["href"];function ks(e,a,s,i,o,d){return d.enabled?(n(),l("div",ms,[t("div",ps,[t("h3",fs,r(e.__("Donate")),1),t("p",bs,r(d.donationText),1),t("div",vs,[t("a",{target:"_blank",class:"hover:bg-light-blue-50 dark:hover:bg-cool-gray-900 border px-2 py-1 border-light-blue-400 font-semibold rounded",href:e.$page.props.generalSettings.donation_box_url},r(e.__("Donate Now")),9,xs)])])])):u("",!0)}const ws=P(ys,[["render",ks]]),Ss={props:{users:Array,enabled:Boolean},computed:{guestCount(){let e=0;return this.users.forEach(a=>{a.user||e++}),e},onlineMembers(){return this.users.filter(e=>e.user)}}},Ls={key:0},Ps={class:"p-3 bg-white dark:bg-cool-gray-800 rounded shadow space-y-2"},Cs={class:"font-extrabold text-gray-800 dark:text-gray-200"},As={key:0,class:"flex justify-center flex-wrap"},$s=["src","alt"],Is={key:1,class:"text-gray-500 dark:text-gray-400 italic font-light flex justify-center"},Ts={class:"flex justify-center text-xs text-gray-700 dark:text-gray-300 font-semibold"};function Ms(e,a,s,i,o,d){const m=h("inertia-link");return s.enabled&&s.users?(n(),l("div",Ls,[t("div",Ps,[t("h3",Cs,r(e.__("Online Users")),1),s.users&&s.users.length>0?(n(),l("div",As,[(n(!0),l(A,null,$(d.onlineMembers,y=>(n(),w(m,{key:y.id,as:"div",href:e.route("user.public.get",y.user.username),class:"cursor-pointer flex mr-2 items-center text-light-blue-500 hover:underline",style:Q([y.user.roles[0].color?{color:y.user.roles[0].color}:null])},{default:b(()=>[t("img",{class:"h-5 w-5 rounded-full mr-0.5",src:y.user.profile_photo_url,alt:y.user.username},null,8,$s),t("span",null,"@"+r(y.user.username),1)]),_:2},1032,["href","style"]))),128))])):(n(),l("div",Is,r(e.__("No member online.")),1)),t("div",Ts,r(e.__("Total"))+": "+r(d.guestCount+d.onlineMembers.length)+" ("+r(e.__("members"))+": "+r(d.onlineMembers.length)+", "+r(e.__("guests"))+": "+r(d.guestCount)+") ",1)])])):u("",!0)}const js=P(Ss,[["render",Ms]]),Bs={components:{Icon:O},props:{title:String,players:Array,enabled:Boolean},setup(){const{formatTimeAgoToNow:e,formatToDayDateString:a}=U();return{formatTimeAgoToNow:e,formatToDayDateString:a}}},Ds={key:0},Ns={class:"p-3 bg-white dark:bg-cool-gray-800 rounded shadow space-y-2"},Es={class:"font-extrabold text-gray-800 dark:text-gray-200"},Qs={class:"flex flex-col space-y-2"},Us={class:""},Vs={class:"bg-gray-100 dark:bg-cool-gray-900 dark:bg-opacity-50 text-gray-700 dark:text-gray-300"},Os={scope:"col",class:"p-1 text-left text-xs font-bold text-center uppercase tracking-wider"},Fs={scope:"col",class:"p-1 text-left text-xs font-bold uppercase tracking-wider"},Hs={scope:"col",class:"p-1 text-left text-xs font-bold uppercase tracking-wider"},zs={scope:"col",class:"p-1 text-left text-xs font-bold uppercase tracking-wider"},qs={scope:"col",class:"p-1 text-left text-xs font-bold uppercase tracking-wider hidden sm:table-cell"},Ws={scope:"col",class:"p-1 text-left text-xs font-bold uppercase tracking-wider hidden sm:table-cell"},Ys={class:"bg-white dark:bg-cool-gray-800"},Ks={class:"p-1 text-sm text-light-blue-400 font-extrabold"},Js={key:0,class:"border-2 rounded text-sm px-1 border-light-blue-300 bg-light-blue-50 dark:bg-cool-gray-800"},Gs={class:"p-1"},Rs={class:"flex items-center"},Zs=["content"],Xs=["src","alt"],eo={class:"p-1"},to={key:0,class:"flex items-center"},so=["content"],oo=["src"],ro={class:"p-1"},no={class:"flex items-center"},ao={class:"flex-shrink-0 h-6 w-6"},lo=["src"],io={class:"ml-4"},co={key:0,class:"text-gray-700 dark:text-gray-300 font-bold text-sm truncate"},uo={key:1,class:"text-red-500 dark:text-red-400 italic"},_o={class:"p-1 text-sm text-gray-700 hidden sm:table-cell"},ho={key:0},go={key:1,class:"text-gray-700 dark:text-gray-500 italic"},yo={class:"p-1 text-xs text-gray-700 dark:text-gray-300 hidden sm:table-cell"},mo=["content"];function po(e,a,s,i,o,d){const m=h("inertia-link"),y=h("icon"),v=T("tippy");return s.enabled&&s.players&&s.players.length>0?(n(),l("div",Ds,[t("div",Ns,[t("h3",Es,r(s.title),1),t("div",Qs,[t("table",Us,[t("thead",Vs,[t("tr",null,[t("th",Os,r(e.__("#")),1),t("th",Fs,r(e.__("Flag")),1),t("th",Hs,r(e.__("Rank")),1),t("th",zs,r(e.__("Name")),1),t("th",qs,r(e.__("Rating")),1),t("th",Ws,r(e.__("Last Seen")),1)])]),t("tbody",Ys,[(n(!0),l(A,null,$(s.players,(_,L)=>(n(),l("tr",{key:L,class:j({"bg-gray-50 dark:bg-cool-gray-600 dark:bg-opacity-10":L%2===1})},[t("td",Ks,[_.position?(n(),l("span",Js,r(_.position),1)):u("",!0)]),t("td",Gs,[t("div",Rs,[x((n(),l("div",{class:"flex-shrink-0 h-6 w-6 focus:outline-none",content:_.country.name},[t("img",{class:"h-6 w-6",src:_.country.photo_path,alt:_.country.name},null,8,Xs)],8,Zs)),[[v]])])]),t("td",eo,[_.rank?(n(),l("div",to,[x((n(),l("div",{class:"flex-shrink-0 h-6 w-6 focus:outline-none",content:_.rank.name},[t("img",{class:"h-6 w-6",src:_.rank.photo_url,alt:""},null,8,oo)],8,so)),[[v]])])):u("",!0)]),t("td",ro,[t("div",no,[t("div",ao,[t("img",{class:"h-6 w-6",src:_.avatar_url,alt:""},null,8,lo)]),t("div",io,[x((n(),w(m,{as:"div",href:e.route("player.show",_.uuid),class:"text-sm text-gray-900 focus:outline-none cursor-pointer hover:underline",content:_.uuid},{default:b(()=>[_.username?(n(),l("span",co,r(_.username),1)):(n(),l("span",uo,r(e.__("Unknown")),1))]),_:2},1032,["href","content"])),[[v]])])])]),t("td",_o,[_.rating!=null?(n(),l("span",ho,[x(g(y,{class:"w-6 h-6 focus:outline-none",name:`rating-${_.rating}`,content:_.rating},null,8,["name","content"]),[[v]])])):(n(),l("span",go,r(e.__("none")),1))]),t("td",yo,[x((n(),l("span",{class:"focus:outline-none",content:i.formatToDayDateString(_.last_seen_at)},[p(r(_.last_seen_at?i.formatTimeAgoToNow(_.last_seen_at):"unknown"),1)],8,mo)),[[v]])])],2))),128))])])])])])):u("",!0)}const fo=P(Bs,[["render",po]]),bo={class:"text-gray-700 text-sm dark:text-gray-200"},vo={__name:"VerifyYourEmailBox",setup(e){const a=M(null),s=()=>{a.value=!0};return(i,o)=>{const d=h("InertiaLink");return n(),w(F,{"text-color":"text-orange-800 dark:text-orange-500","border-color":"border-orange-500"},{body:b(()=>[t("div",bo,[t("p",null,r(i.__("Email verification is required to perform any action on the site. Please check your email inbox or ")),1),g(d,{href:i.route("verification.send"),method:"post",as:"button",class:"underline text-light-blue-500 hover:text-light-blue-700",onClick:V(s,["prevent"])},{default:b(()=>[p(r(i.__("Click here to re-send the verification email")),1)]),_:1},8,["href","onClick"]),x(t("div",{class:"mt-2 font-medium text-sm text-green-600"},r(i.__("A new verification link has been sent to your email address.")),513),[[E,a.value]])])]),default:b(()=>[p(r(i.__("Your email address is not verified."))+" ",1)]),_:1})}}},xo={components:{LoadingSpinner:we,CopyToClipboard:ke},props:{settings:Object,server:Object},data(){return{serverInfo:Object,loading:!0,error:null,interval:null}},computed:{bgImageUrl(){return window.colorMode==="dark"?this.settings.home_hero_bg_image_path_dark:this.settings.home_hero_bg_image_path_light},isBgImageVideo(){return this.bgImageUrl.includes(".webm")},joinBoxEnabled(){return this.settings.show_join_box_in_home_hero?!!(this.server||this.$page.props.defaultQueryServer.server):!1}},created(){this.joinBoxEnabled&&(this.getServerPing(),this.interval=setInterval(()=>this.getServerPing(),1e4))},unmounted(){this.joinBoxEnabled&&clearInterval(this.interval)},methods:{getServerPing(){let e=this.server;e||(e=this.$page.props.defaultQueryServer.server),axios.get(route("server.ping.get",e.id)).then(a=>{this.serverInfo=a.data,this.error=null}).catch(a=>{this.error=a.response.data.message||a.message,this.serverInfo=null}).finally(()=>{this.loading=!1})}}},ko=["src"],wo=["title","onClick"],So={key:0},Lo={key:0,class:"text-gray-100 text-xl font-bold"},Po={class:"text-light-blue-500 dark:text-light-blue-400 font-extrabold"},Co={key:1,class:"text-gray-100 text-xl font-bold"},Ao={key:1},$o={class:"text-red-400 font-bold"};function Io(e,a,s,i,o,d){const m=h("loading-spinner"),y=h("copy-to-clipboard"),v=T("tippy");return s.settings.enable_home_hero_section?(n(),l("div",{key:0,class:"flex justify-center items-center",style:Q(`
                background: url('${d.isBgImageVideo?"":d.bgImageUrl}');
                background-size: ${s.settings.home_hero_bg_size_css};
                background-repeat: ${s.settings.home_hero_bg_repeat_css};
                background-position: ${s.settings.home_hero_bg_position_css};
                background-attachment: ${s.settings.home_hero_bg_attachment_css};
                height: ${s.settings.home_hero_bg_height_css};
              `)},[d.isBgImageVideo?(n(),l("video",{key:0,id:"home_hero_bg_image_light_video",class:"-z-10 absolute w-full",autoplay:"",loop:"",muted:"",style:Q(`
                object-fit: ${s.settings.home_hero_bg_size_css};
                object-position: ${s.settings.home_hero_bg_position_css};
                height: ${s.settings.home_hero_bg_height_css};
      `)},[t("source",{src:d.bgImageUrl,type:"video/webm"},null,8,ko)],4)):u("",!0),d.joinBoxEnabled?(n(),w(y,{key:1},{default:b(_=>{var L,C;return[x((n(),l("button",{type:"button",title:e.__("Click to Copy"),class:"bg-gray-800 bg-opacity-75 items-center px-5 py-3 rounded mx-3",onClick:c=>{var f,S;return _.copy(s.server?s.server.hostname:(S=(f=e.$page.props.defaultQueryServer)==null?void 0:f.server)==null?void 0:S.hostname)}},[g(m,{loading:o.loading},null,8,["loading"]),!o.loading&&!o.error?(n(),l("div",So,[_.status!=="copied"?(n(),l("span",Lo,[p(r(e.__("Join"))+" ",1),t("span",Po,r(o.serverInfo.players.online),1),p(" "+r(e.__("players on"))+" "+r(s.server?s.server.hostname:(C=(L=e.$page.props.defaultQueryServer)==null?void 0:L.server)==null?void 0:C.hostname),1)])):(n(),l("span",Co,r(e.__("Copied!")),1))])):u("",!0),o.error?(n(),l("div",Ao,[t("span",$o,r(o.error),1)])):u("",!0)],8,wo)),[[v]])]}),_:1})):u("",!0)],4)):u("",!0)}const To=P(xo,[["render",Io]]),Mo={components:{HeroSection:To,VerifyYourEmailBox:vo,TopPlayersListBox:fo,OnlineUsersBox:js,DonationBox:ws,PollBox:xe,ServerStatusBox:ve,IngameChatBox:gs,OnlinePlayersBox:It,DidYouKnowBox:ae,VersionCheck:pt,SocialChannelBox:ye,PostListBox:me,WelcomeBox:Ge,NewsBox:re,AppLayout:oe,ShoutBox:ne,DiscordServerBox:le,NewestUserBox:Be,VotingSitesBox:ze,LatestPinnedNews:lt},props:{pinnedNewsList:Array,newslist:Array,newestUser:Object,latestPoll:Object,onlineUsers:Array,welcomeBoxContentHtml:{type:[String,null]},chatDefaultServerId:Number,chatServerList:Array,top10Players:Array,themeSettings:Object},setup(){const{canWild:e,isStaff:a}=H();return{canWild:e,isStaff:a}},data(){return{generalSettings:this.$page.props.generalSettings}}},jo={class:"grid grid-cols-none gap-4 px-2 py-4 mx-auto md:grid-cols-4 md:gap-6 md:py-12 md:px-10 md:px-6 lg:px-16 max-w-screen-2xl"},Bo={class:"order-1 col-span-1 space-y-4 md:order-none"},Do={class:"order-3 col-span-1 space-y-4 md:col-span-2 md:order-none"},No={class:"order-2 col-span-1 space-y-4 md:order-none"};function Eo(e,a,s,i,o,d){const m=h("app-head"),y=h("hero-section"),v=h("online-players-box"),_=h("voting-sites-box"),L=h("poll-box"),C=h("did-you-know-box"),c=h("discord-server-box"),f=h("donation-box"),S=h("VerifyYourEmailBox"),I=h("version-check"),B=h("welcome-box"),z=h("ingame-chat-box"),q=h("top-players-list-box"),W=h("latest-pinned-news"),Y=h("post-list-box"),K=h("server-status-box"),J=h("shout-box"),G=h("news-box"),R=h("online-users-box"),Z=h("newest-user-box"),X=h("social-channel-box"),ee=h("app-layout");return n(),w(ee,null,{default:b(()=>[g(m),s.themeSettings.enable_home_hero_section?(n(),w(y,{key:0,settings:s.themeSettings},null,8,["settings"])):u("",!0),t("div",jo,[t("div",Bo,[o.generalSettings.enable_mcserver_onlineplayersbox?(n(),w(v,{key:0})):u("",!0),g(_,{votingsites:o.generalSettings.voteforserverbox_content,enabled:o.generalSettings.enable_voteforserverbox},null,8,["votingsites","enabled"]),g(L,{poll:s.latestPoll},null,8,["poll"]),g(C,{enabled:o.generalSettings.enable_didyouknowbox},null,8,["enabled"]),g(c,{enabled:o.generalSettings.enable_discordbox,server:o.generalSettings.discord_server_id},null,8,["enabled","server"]),g(f)]),t("div",Do,[e.$page.props.jetstream.hasEmailVerification&&e.$page.props.auth.user&&e.$page.props.auth.user.email_verified_at===null?(n(),w(S,{key:0})):u("",!0),e.$page.props.auth.user&&i.isStaff(e.$page.props.auth.user)?(n(),w(I,{key:1})):u("",!0),o.generalSettings.enable_welcomebox?(n(),w(B,{key:2,"html-data":s.welcomeBoxContentHtml},null,8,["html-data"])):u("",!0),g(z,{"default-server-id":s.chatDefaultServerId,"server-list":s.chatServerList},null,8,["default-server-id","server-list"]),g(q,{enabled:!0,players:s.top10Players,title:e.__("Top 10 Players")},null,8,["players","title"]),g(W,{newslist:s.pinnedNewsList},null,8,["newslist"]),o.generalSettings.enable_status_feed?(n(),w(Y,{key:3})):u("",!0)]),t("div",No,[g(K),g(J),g(G,{newslist:s.newslist},null,8,["newslist"]),g(R,{users:s.onlineUsers,enabled:o.generalSettings.enable_onlineuserbox},null,8,["users","enabled"]),g(Z,{user:s.newestUser,enabled:o.generalSettings.enable_newuserbox},null,8,["user","enabled"]),g(X,{enabled:o.generalSettings.enable_socialbox,"show-title":!0,twitter:o.generalSettings.twitter_url,twitch:o.generalSettings.twitch_url,youtube:o.generalSettings.youtube_url,facebook:o.generalSettings.facebook_url,linkedin:o.generalSettings.linkedin_url,tiktok:o.generalSettings.tiktok_url},null,8,["enabled","twitter","twitch","youtube","facebook","linkedin","tiktok"])])])]),_:1})}const nr=P(Mo,[["render",Eo]]);export{nr as default};
