import{A as k}from"./AppLayout.a27d234c.js";import{L as U}from"./LoadingButton.162c6be9.js";import{X as q}from"./XInput.ce27f4dc.js";import{X as P}from"./XSelect.e855d5ce.js";import{X as C}from"./XCheckbox.7893c662.js";import{_ as L,p as i,o as m,c as g,w as y,b as l,a as t,t as a,l as E,x as u,z as f,n as T,e as d,d as v,f as b}from"./app.6f335fbd.js";const j={components:{XCheckbox:C,XSelect:P,AppLayout:k,LoadingButton:U,XInput:q},props:{versionsArray:Array,server:{type:Object,default:null}},data(){return{form:this.$inertia.form({connection_type:this.server.connection_type,storage_server_host:this.server.storage_server_host,storage_server_port:this.server.storage_server_port,storage_server_username:this.server.storage_server_username,storage_server_password:this.server.storage_server_password,storage_server_root:this.server.storage_server_root,storage_server_ssl:this.server.storage_server_ssl,storage_server_key:"",name:this.server.name,join_port:this.server.join_port,query_port:this.server.query_port,webquery_port:this.server.webquery_port,level_name:this.server.level_name,minecraft_version:this.server.minecraft_version,type:this.server.type,hostname:this.server.hostname,ip_address:this.server.ip_address,is_stats_tracking_enabled:this.server.is_stats_tracking_enabled,is_ingame_chat_enabled:this.server.is_ingame_chat_enabled,is_online_players_query_enabled:this.server.is_online_players_query_enabled,settings:this.server.settings}),isPrefetchSuccessful:!1,prefetchError:null,fetchLoading:!1,serverStatus:null,typeArray:{0:"Paper",1:"Spigot",2:"Forge",3:"Bukkit",4:"Vanilla"}}},methods:{prefetch(){this.prefetchError=null,this.fetchLoading=!0,this.isPrefetchSuccessful=!1,axios.post(route("admin.server.prefetch"),this.form).then(r=>{if(this.form.name=r.data.data.motd,this.form.join_port=r.data.data["server-port"],this.form.query_port=r.data.data["query.port"],this.form.level_name=r.data.data["level-name"],this.form.hostname=r.data.data["server-ip"]+":"+r.data.data["server-port"],this.form.ip_address=r.data.data["server-ip"],this.isPrefetchSuccessful=!0,this.serverStatus=r.data.server_status,this.serverStatus){let o=0;this.versionsArray.forEach(_=>{r.data.server_status.version.name.indexOf(_)>=0&&(this.form.minecraft_version=this.versionsArray[o]),o++})}this.fetchLoading=!1},r=>{this.prefetchError=r.response.data.message,this.fetchLoading=!1})},updateServer(){this.form.put(route("admin.server.update",this.server.id),{preserveScroll:!0})}}},A={class:"py-12 px-10 max-w-6xl mx-auto"},F={class:"flex justify-between mb-8"},B={class:"font-bold text-3xl text-gray-500 dark:text-gray-300"},X={class:"mt-10 sm:mt-0"},I={class:"md:grid md:grid-cols-3 md:gap-6"},N={class:"md:col-span-1"},z={class:"px-4 sm:px-0"},H={class:"text-lg font-medium leading-6 text-gray-900 dark:text-gray-400"},O={class:"mt-1 text-sm text-gray-600 dark:text-gray-500"},M={class:"mt-5 md:mt-0 md:col-span-2"},D={class:"shadow overflow-hidden sm:rounded-md"},J={class:"px-4 py-5 bg-white dark:bg-cool-gray-800 sm:p-6"},W={class:"grid grid-cols-6 gap-6"},G={class:"col-span-6 sm:col-span-6"},Q={class:"col-span-6 sm:col-span-4"},R={class:"col-span-6 sm:col-span-2"},K={class:"col-span-6 sm:col-span-2"},Y={class:"col-span-6 sm:col-span-2"},Z={class:"flex items-center col-span-6 sm:col-span-4"},$={class:"col-span-6 sm:col-span-3"},ee={class:"col-span-6 sm:col-span-3"},re={class:"col-span-6 sm:col-span-2"},oe={class:"col-span-6 sm:col-span-2"},se={class:"col-span-6 sm:col-span-2"},te={class:"col-span-6 sm:col-span-2"},le={class:"col-span-6 sm:col-span-2"},ne={class:"col-span-6 sm:col-span-2"},ae={class:"col-span-6 sm:col-span-2"},ie={class:"flex items-center col-span-6 sm:col-span-4"},me={class:"flex items-center col-span-6 sm:col-span-4"},_e={class:"flex items-center col-span-6 sm:col-span-4"},pe={class:"flex items-center col-span-6 sm:col-span-4"},de={class:"px-4 py-3 bg-gray-50 dark:bg-cool-gray-800 sm:px-6 flex justify-between"},ce=["disabled"],ue={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},fe=t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),ve=t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),he=[fe,ve],ye={key:0,class:"text-red-600 bg-red-100 px-4 rounded flex items-center"},ge={key:1,class:"text-green-600 bg-green-100 px-4 rounded flex items-center"},be={key:2,class:"text-yellow-600 bg-yellow-100 px-4 rounded flex items-center"};function xe(r,o,_,Ve,e,c){const x=i("app-head"),V=i("inertia-link"),h=i("x-select"),n=i("x-input"),p=i("x-checkbox"),w=i("loading-button"),S=i("app-layout");return m(),g(S,null,{default:y(()=>[l(x,{title:r.__("Edit Server: :name",{name:_.server.name})},null,8,["title"]),t("div",A,[t("div",F,[t("h1",B,a(r.__("Edit Server: :name",{name:_.server.name})),1),l(V,{href:r.route("admin.server.index"),class:"inline-flex items-center px-4 py-2 bg-gray-400 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-500 active:bg-gray-600 focus:outline-none focus:border-gray-500 focus:shadow-outline-gray transition ease-in-out duration-150"},{default:y(()=>[t("span",null,a(r.__("Cancel")),1)]),_:1},8,["href"])]),t("div",X,[t("div",I,[t("div",N,[t("div",z,[t("h3",H,a(r.__("Overview")),1),t("p",O,a(r.__("Just enter FTP / SFTP Information and Check FETCH. Manually fill the part which are not able to be fetch.  All sensitive information will be encrypted.")),1)])]),t("div",M,[t("form",{onSubmit:o[21]||(o[21]=E((...s)=>c.updateServer&&c.updateServer(...s),["prevent"]))},[t("div",D,[t("div",J,[t("div",W,[t("div",G,[l(h,{id:"connection_type",modelValue:e.form.connection_type,"onUpdate:modelValue":o[0]||(o[0]=s=>e.form.connection_type=s),name:"connection_type",error:e.form.errors.connection_type,label:r.__("Connection Type"),"select-list":{sftp:"SFTP - Secure File Transfer Protocol",ftp:"FTP - File Transfer Protocol",local:"Local - Locally stored at server location"}},null,8,["modelValue","error","label"])]),u(t("div",Q,[l(n,{id:"storage_server_host",modelValue:e.form.storage_server_host,"onUpdate:modelValue":o[1]||(o[1]=s=>e.form.storage_server_host=s),label:r.__(":connection_type Server Host",{connection_type:e.form.connection_type.toUpperCase()}),error:e.form.errors.storage_server_host,type:"text",name:"storage_server_host","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])],512),[[f,e.form.connection_type!=="local"]]),u(t("div",R,[l(n,{id:"storage_server_port",modelValue:e.form.storage_server_port,"onUpdate:modelValue":o[2]||(o[2]=s=>e.form.storage_server_port=s),label:r.__(":connection_type Port",{connection_type:e.form.connection_type.toUpperCase()}),error:e.form.errors.storage_server_port,type:"text",name:"storage_server_port","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])],512),[[f,e.form.connection_type!=="local"]]),u(t("div",K,[l(n,{id:"storage_server_username",modelValue:e.form.storage_server_username,"onUpdate:modelValue":o[3]||(o[3]=s=>e.form.storage_server_username=s),label:r.__("Username"),error:e.form.errors.storage_server_username,type:"text",name:"storage_server_username","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])],512),[[f,e.form.connection_type!=="local"]]),u(t("div",Y,[l(n,{id:"storage_server_password",modelValue:e.form.storage_server_password,"onUpdate:modelValue":o[4]||(o[4]=s=>e.form.storage_server_password=s),label:r.__("Password"),error:e.form.errors.storage_server_password,type:"text",name:"storage_server_password","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])],512),[[f,e.form.connection_type!=="local"]]),t("div",{class:T(["col-span-6",e.form.connection_type==="local"?"sm:col-span-6":"sm:col-span-2"])},[l(n,{id:"storage_server_root",modelValue:e.form.storage_server_root,"onUpdate:modelValue":o[5]||(o[5]=s=>e.form.storage_server_root=s),label:r.__("Server Root Path"),error:e.form.errors.storage_server_root,type:"text",name:"storage_server_root","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])],2),t("div",Z,[e.form.connection_type==="ftp"?(m(),g(p,{key:0,id:"storage_server_ssl",modelValue:e.form.storage_server_ssl,"onUpdate:modelValue":o[6]||(o[6]=s=>e.form.storage_server_ssl=s),label:r.__("SSL"),help:r.__("Check if FTP connection should be made using SSL"),name:"is_ingame_chat_enabled"},null,8,["modelValue","label","help"])):d("",!0)]),t("div",$,[l(n,{id:"name",modelValue:e.form.name,"onUpdate:modelValue":o[7]||(o[7]=s=>e.form.name=s),label:r.__("Server Name"),error:e.form.errors.name,type:"text",name:"name","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])]),t("div",ee,[l(n,{id:"hostname",modelValue:e.form.hostname,"onUpdate:modelValue":o[8]||(o[8]=s=>e.form.hostname=s),label:r.__("Hostname"),error:e.form.errors.hostname,type:"text",name:"hostname","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])]),t("div",re,[l(n,{id:"ip_address",modelValue:e.form.ip_address,"onUpdate:modelValue":o[9]||(o[9]=s=>e.form.ip_address=s),label:r.__("IP Address"),error:e.form.errors.ip_address,autocomplete:"ip_address",type:"text",name:"ip_address","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])]),t("div",oe,[l(n,{id:"join_port",modelValue:e.form.join_port,"onUpdate:modelValue":o[10]||(o[10]=s=>e.form.join_port=s),label:r.__("Join Port"),error:e.form.errors.join_port,type:"text",name:"join_port","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])]),t("div",se,[l(n,{id:"query_port",modelValue:e.form.query_port,"onUpdate:modelValue":o[11]||(o[11]=s=>e.form.query_port=s),label:r.__("Query Port"),error:e.form.errors.query_port,type:"text",name:"query_port","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])]),t("div",te,[l(n,{id:"webquery_port",modelValue:e.form.webquery_port,"onUpdate:modelValue":o[12]||(o[12]=s=>e.form.webquery_port=s),label:r.__("Webquery Port"),error:e.form.errors.webquery_port,type:"text",name:"webquery_port","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])]),t("div",le,[l(n,{id:"level_name",modelValue:e.form.level_name,"onUpdate:modelValue":o[13]||(o[13]=s=>e.form.level_name=s),label:r.__("Level/World Name"),error:e.form.errors.level_name,type:"text",name:"level_name","help-error-flex":"flex-col"},null,8,["modelValue","label","error"])]),t("div",ne,[l(h,{id:"type",modelValue:e.form.type,"onUpdate:modelValue":o[14]||(o[14]=s=>e.form.type=s),name:"type",placeholder:r.__("Select server type"),"disable-null":!0,required:!0,error:e.form.errors.type,label:r.__("Server Type"),"select-list":e.typeArray},null,8,["modelValue","placeholder","error","label","select-list"])]),t("div",ae,[l(h,{id:"minecraft_version",modelValue:e.form.minecraft_version,"onUpdate:modelValue":o[15]||(o[15]=s=>e.form.minecraft_version=s),name:"minecraft_version",error:e.form.errors.minecraft_version,label:r.__("Version"),"select-list":_.versionsArray},null,8,["modelValue","error","label","select-list"])]),t("div",ie,[l(p,{id:"settings_plugin_essentials",modelValue:e.form.settings.plugins.essentials,"onUpdate:modelValue":o[16]||(o[16]=s=>e.form.settings.plugins.essentials=s),label:r.__("Plugin: Essentials"),help:r.__("Tick if there is Essentials/EssentialsX installed in your server."),name:"settings_plugin_essentials"},null,8,["modelValue","label","help"])]),t("div",me,[l(p,{id:"is_stats_tracking_enabled",modelValue:e.form.is_stats_tracking_enabled,"onUpdate:modelValue":o[17]||(o[17]=s=>e.form.is_stats_tracking_enabled=s),label:r.__("Track Player Stats of this Server"),help:r.__("Fetch player stats and use it for calculation of ranks and other stuffs. Uncheck if this you dont want to track this server."),name:"is_stats_tracking_enabled"},null,8,["modelValue","label","help"])]),t("div",_e,[l(p,{id:"is_ingame_chat_enabled",modelValue:e.form.is_ingame_chat_enabled,"onUpdate:modelValue":o[18]||(o[18]=s=>e.form.is_ingame_chat_enabled=s),label:r.__("Enable In-Game Chat of this Server"),help:r.__("Let user from website see and send chat to server."),name:"is_ingame_chat_enabled"},null,8,["modelValue","label","help"])]),t("div",pe,[l(p,{id:"is_online_players_query_enabled",modelValue:e.form.is_online_players_query_enabled,"onUpdate:modelValue":o[19]||(o[19]=s=>e.form.is_online_players_query_enabled=s),label:r.__("Show online player list of this Server"),help:r.__("If enabled show list of online players on this server near ingamechat."),name:"is_online_players_query_enabled"},null,8,["modelValue","label","help"])])])]),t("div",de,[t("button",{id:"prefetch",disabled:e.fetchLoading,type:"button",class:"mr-2 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gray-500 hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50",onClick:o[20]||(o[20]=(...s)=>c.prefetch&&c.prefetch(...s))},[e.fetchLoading?(m(),v("svg",ue,he)):d("",!0),b(" "+a(r.__("Test & Fetch Latest Server Information")),1)],8,ce),l(w,{loading:e.form.processing,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-light-blue-500 hover:bg-light-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-light-blue-500 disabled:opacity-50",type:"submit"},{default:y(()=>[b(a(r.__("Update Server")),1)]),_:1},8,["loading"])]),e.prefetchError?(m(),v("div",ye,a(e.prefetchError),1)):d("",!0),e.isPrefetchSuccessful&&e.serverStatus?(m(),v("div",ge,a(r.__(":connection_type connection successful & Server is Online.",{connection_type:e.form.connection_type.toUpperCase()})),1)):d("",!0),e.isPrefetchSuccessful&&!e.serverStatus?(m(),v("div",be,a(r.__(":connection_type connection successful but Server is offline.",{connection_type:e.form.connection_type.toUpperCase()})),1)):d("",!0)])],32)])])])])]),_:1})}const Ce=L(j,[["render",xe]]);export{Ce as default};
