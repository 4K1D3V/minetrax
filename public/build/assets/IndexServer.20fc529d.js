import{P as C}from"./Pagination.bb46f3bf.js";import{_ as D}from"./ConfirmationModal.463fa4b9.js";import{_ as A}from"./SecondaryButton.70b07737.js";import{_ as T}from"./DangerButton.c33bbf17.js";import{_ as W}from"./AlertCard.9185286c.js";import{_ as N,T as Q,c as y,w as a,l,o,b as g,a as t,f as i,t as s,e as _,s as j,d as n,g as L,F,n as P,q}from"./app.d963b5bf.js";import{_ as V}from"./AdminLayout.ac00fc59.js";import{u as O,a as E}from"./AppLayout.b41f3091.js";import"./Modal.4b805def.js";const I={components:{AdminLayout:V,AlertCard:W,Pagination:C,JetConfirmationModal:D,JetSecondaryButton:A,JetDangerButton:T},props:{servers:Object,canCreateBungeeServer:Boolean},setup(){const{can:e}=O(),{formatTimeAgoToNow:u,formatToDayDateString:c}=E();return{can:e,formatTimeAgoToNow:u,formatToDayDateString:c}},data(){return{deleteServerForm:Q({}),serverBeingDeleted:null,serverStatus:{},serverWebQueryStatus:{}}},mounted(){this.servers.data.forEach(e=>{axios.get(route("server.ping.get",e.id)).then(()=>{this.$nextTick(()=>this.serverStatus[e.id]=1)}).catch(()=>{this.$nextTick(()=>this.serverStatus[e.id]=-1)}),e.type.value!==5?axios.get(route("server.webquery.get",e.id)).then(()=>{this.$nextTick(()=>this.serverWebQueryStatus[e.id]=1)}).catch(()=>{this.$nextTick(()=>this.serverWebQueryStatus[e.id]=-1)}):this.serverWebQueryStatus[e.id]=0})},methods:{confirmServerDeletion(e){this.serverBeingDeleted=e},deleteServer(){this.deleteServerForm.delete(route("admin.server.delete",this.serverBeingDeleted),{preserveScroll:!0,preserveState:!0,onSuccess:()=>this.serverBeingDeleted=null})}}},J={class:"py-12 px-10 max-w-7xl mx-auto"},z={class:"italic text-gray-400 dark:text-gray-500"},M={class:"flex justify-between mb-8"},Y={class:"font-bold text-3xl text-gray-500 dark:text-gray-300 flex items-center"},H={class:"flex"},R={class:"hidden md:inline"},U={class:"flex flex-col"},G={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},K={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},X={class:"shadow overflow-hidden border-b border-gray-200 dark:border-none sm:rounded-lg"},Z={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},$={class:"bg-gray-50 dark:bg-cool-gray-800 text-gray-500 dark:text-gray-300"},ee={scope:"col",class:"px-3 py-3 text-left text-xs font-bold uppercase tracking-wider"},te={scope:"col",class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"},se={scope:"col",class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"},re={scope:"col",class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"},oe={scope:"col",class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"},ae={scope:"col",class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"},ne={scope:"col",class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"},ie={scope:"col",class:"relative px-6 py-3"},de={class:"sr-only"},le={class:"bg-white dark:bg-cool-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ce={class:"px-3 py-4 whitespace-nowrap text-sm font-bold text-gray-500 dark:text-gray-400"},_e={class:"px-6 py-4 whitespace-nowrap"},ue={class:"flex items-center"},pe={class:"flex-shrink-0 h-10 w-10"},ye=["src"],ge={class:"ml-4"},he={class:"text-sm font-medium text-gray-900 dark:text-gray-300"},me={class:"text-sm text-gray-500 dark:text-gray-400"},xe={class:"px-6 py-4 whitespace-nowrap"},fe={class:"text-sm text-gray-900 dark:text-gray-300"},be={class:"text-sm text-gray-500 dark:text-gray-400"},ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},ke={class:"px-6 py-4 space-y-1 whitespace-nowrap"},we={class:"flex"},Se={key:0,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-opacity-25 dark:text-green-400"},Be={key:1,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800 dark:bg-opacity-25 dark:text-red-400"},Ce={key:2,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-opacity-25 dark:text-gray-400"},De={class:"flex"},Ae={key:0,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-opacity-25 dark:text-green-400"},Te={key:1,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800 dark:bg-opacity-25 dark:text-red-400"},We={key:2},Ne={key:3,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-opacity-25 dark:text-gray-400"},Qe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},je={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Le={key:0,class:"italic"},Fe={key:1},Pe={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium dark:text-gray-300"},qe=["onClick"],Ve={key:0},Oe={class:"border-t px-6 py-4 text-center dark:text-gray-400 dark:border-gray-700",colspan:"8"};function Ee(e,u,c,p,d,m){const x=l("app-head"),f=l("AlertCard"),h=l("inertia-link"),b=l("pagination"),v=l("jet-secondary-button"),k=l("jet-danger-button"),w=l("jet-confirmation-modal"),S=l("AdminLayout"),B=q("tippy");return o(),y(S,null,{default:a(()=>[g(x,{title:e.__("Servers Administration")},null,8,["title"]),t("div",J,[c.canCreateBungeeServer?(o(),y(f,{key:0,"text-color":"text-orange-800 dark:text-orange-500","border-color":"border-orange-500"},{body:a(()=>[i(s(e.__("When a bungee server is not added. Player List Box and Player Status Box (if enabled from settings), use first added server as default query server."))+" ",1),t("p",z,s(e.__("Note: This is not an error. You can safely ignore this message if you don't have proxy server.")),1)]),default:a(()=>[i(s(e.__("You don't have Bungee/Proxy Server Added!"))+" ",1)]),_:1})):_("",!0),t("div",M,[t("h1",Y,[i(s(e.__("Servers"))+" ",1),p.can("create servers")?j((o(),y(h,{key:0,as:"button",title:e.__("MineTrax automatically scan all servers every hour for new players and statistics updates. Click here to force a scan now. Use it rarely."),href:e.route("admin.server.force-scan"),method:"post",class:"ml-2 inline-flex items-center px-4 py-2 border border-2 border-red-600 rounded-md font-semibold text-xs text-red-600 uppercase tracking-widest focus:outline-none focus:border-red-800 transition ease-in-out duration-150 dark:text-red-500 dark:border-red-700 dark:hover:border-red-500"},{default:a(()=>[t("span",null,s(e.__("Rescan all servers")),1)]),_:1},8,["title","href"])),[[B]]):_("",!0)]),t("div",H,[p.can("create servers")&&c.canCreateBungeeServer?(o(),y(h,{key:0,href:e.route("admin.server.create-bungee"),class:"mr-1 inline-flex items-center px-4 py-2 border border-2 border-gray-800 rounded-md font-semibold text-xs text-gray-800 uppercase tracking-widest focus:outline-none focus:border-gray-900 transition ease-in-out duration-150 dark:text-gray-300 dark:border-gray-700 dark:hover:border-gray-500"},{default:a(()=>[t("span",null,s(e.__("Add Bungee Server")),1)]),_:1},8,["href"])):_("",!0),p.can("create servers")?(o(),y(h,{key:1,href:e.route("admin.server.create"),class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:shadow-outline-gray transition ease-in-out duration-150"},{default:a(()=>[t("span",null,s(e.__("Add")),1),t("span",R,"\xA0"+s(e.__("Server")),1)]),_:1},8,["href"])):_("",!0)])]),t("div",U,[t("div",G,[t("div",K,[t("div",X,[t("table",Z,[t("thead",$,[t("tr",null,[t("th",ee,s(e.__("Id")),1),t("th",te,s(e.__("Name")),1),t("th",se,s(e.__("IP:Port")),1),t("th",re,s(e.__("Type")),1),t("th",oe,s(e.__("Status")),1),t("th",ae,s(e.__("Version")),1),t("th",ne,s(e.__("Last Scanned")),1),t("th",ie,[t("span",de,s(e.__("Edit")),1)])])]),t("tbody",le,[(o(!0),n(F,null,L(c.servers.data,r=>(o(),n("tr",{key:r.id},[t("td",ce,s(r.id),1),t("td",_e,[t("div",ue,[t("div",pe,[t("img",{class:"h-10 w-10",src:r.country.photo_path,alt:"Country Flag"},null,8,ye)]),t("div",ge,[t("div",he,s(r.name),1),t("div",me,s(r.hostname),1)])])]),t("td",xe,[t("div",fe,s(r.ip_address)+" : "+s(r.join_port),1),t("div",be,s(e.__("WebQuery: :webquery_port",{webquery_port:r.webquery_port||e.__("not set")})),1)]),t("td",ve,s(r.type.key),1),t("td",ke,[t("div",we,[d.serverStatus[r.id]===1?(o(),n("span",Se,s(e.__("Server Online")),1)):d.serverStatus[r.id]===-1?(o(),n("span",Be,s(e.__("Server Offline")),1)):(o(),n("span",Ce,s(e.__("Loading"))+"...",1))]),t("div",De,[d.serverWebQueryStatus[r.id]===1?(o(),n("span",Ae,s(e.__("WebQuery Online")),1)):d.serverWebQueryStatus[r.id]===-1?(o(),n("span",Te,s(e.__("WebQuery Offline")),1)):d.serverWebQueryStatus[r.id]===0?(o(),n("span",We)):(o(),n("span",Ne,s(e.__("Loading"))+"...",1))])]),t("td",Qe,s(r.minecraft_version),1),t("td",je,[r.type.value===5?(o(),n("span",Le,s(e.__("not applicable")),1)):(o(),n("span",Fe,s(r.last_scanned_at?p.formatTimeAgoToNow(r.last_scanned_at):e.__("not scanned yet")),1))]),t("td",Pe,[g(h,{as:"a",href:e.route("admin.server.show",r.id),class:"text-blue-600 hover:text-blue-900"},{default:a(()=>[i(s(e.__("View Intel")),1)]),_:2},1032,["href"]),i(" / "),p.can("update servers")?(o(),y(h,{key:0,as:"a",href:e.route("admin.server.edit",r.id),class:"text-yellow-600 hover:text-yellow-900"},{default:a(()=>[i(s(e.__("Edit")),1)]),_:2},1032,["href"])):_("",!0),i(" / "),p.can("delete servers")?(o(),n("button",{key:1,class:"text-red-600 hover:text-red-900 focus:outline-none",onClick:Ie=>m.confirmServerDeletion(r.id)},s(e.__("Delete")),9,qe)):_("",!0)])]))),128)),c.servers.data.length===0?(o(),n("tr",Ve,[t("td",Oe,s(e.__("No servers found.")),1)])):_("",!0)])])])])])]),g(b,{links:c.servers.links},null,8,["links"])]),g(w,{show:!!d.serverBeingDeleted,onClose:u[1]||(u[1]=r=>d.serverBeingDeleted=null)},{title:a(()=>[i(s(e.__("Delete Server")),1)]),content:a(()=>[i(s(e.__("Are you sure you would like to delete this Server? All data related to this server will be deleted too.")),1)]),footer:a(()=>[g(v,{onClick:u[0]||(u[0]=r=>d.serverBeingDeleted=null)},{default:a(()=>[i(s(e.__("Nevermind")),1)]),_:1}),g(k,{class:P(["ml-2",{"opacity-25":d.deleteServerForm.processing}]),disabled:d.deleteServerForm.processing,onClick:m.deleteServer},{default:a(()=>[i(s(e.__("Delete Server")),1)]),_:1},8,["class","disabled","onClick"])]),_:1},8,["show"])]),_:1})}const Xe=N(I,[["render",Ee]]);export{Xe as default};
