import{_ as E}from"./AdminLayout.9e59f306.js";import{u as L}from"./useAuthorizable.b252bfcc.js";import{u as N}from"./AppLayout.0c3349eb.js";import{H as S,O,c,w as l,I as V,o,b as d,u as e,a,f as x,t as r,e as y,s as _,d as i,U as v,l as B,q as D}from"./app.50c0f8cb.js";import{D as b,_ as $}from"./DtRowItem.63873b01.js";import{u as P}from"./index.ba1c4393.js";import{_ as W}from"./AlertCard.b7875689.js";import{r as Q}from"./EyeIcon.af387e12.js";import{r as R}from"./PencilSquareIcon.a2ee7bb6.js";import{r as H}from"./TrashIcon.46ecc980.js";import"./XMarkIcon.a268be53.js";import"./index.08ce819f.js";const M={class:"px-10 py-8 mx-auto text-gray-400"},U={class:"italic text-gray-400 dark:text-gray-500"},Y={class:"flex justify-between mb-8"},z={class:"font-bold text-3xl text-gray-500 dark:text-gray-300 flex items-center"},F={class:"flex"},G={class:"hidden md:inline"},J={class:"px-4 py-4 text-sm text-center text-gray-800 whitespace-nowrap dark:text-gray-200 font-bold"},K={class:"flex items-center"},X={class:"flex-shrink-0 h-10 w-10"},Z=["src"],ee={class:"ml-4"},te={class:"text-sm font-medium text-gray-900 dark:text-gray-300"},re={class:"text-sm text-gray-500 dark:text-gray-400"},se={class:"text-sm text-gray-900 dark:text-gray-300"},ae={class:"text-sm text-gray-500 dark:text-gray-400"},oe={class:"px-4 space-y-1 whitespace-nowrap"},ne={class:"flex"},le={key:0,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-opacity-25 dark:text-green-400"},de={key:1,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800 dark:bg-opacity-25 dark:text-red-400"},ie={key:2,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-opacity-25 dark:text-gray-400"},ce={class:"flex"},ue={key:0,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-opacity-25 dark:text-green-400"},fe={key:1,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800 dark:bg-opacity-25 dark:text-red-400"},xe={key:2},ye={key:3,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-opacity-25 dark:text-gray-400"},he={key:0,class:"italic"},pe=["title"],ge={class:"px-6 py-4 space-x-2 text-sm font-medium text-right whitespace-nowrap"},Ie={__name:"IndexServer",props:{canCreateBungeeServer:Boolean,servers:Object,filters:Object},setup(h){const T=h,{can:p}=L(),{__:t}=V(),{formatTimeAgoToNow:C,formatToDayDateString:A}=N(),k=P("show-bungee-server-missing-alert",!0),I=[{key:"id",label:t("ID"),sortable:!0,class:"text-center font-bold"},{key:"name",sortable:!0,label:t("Name")},{key:"ip_address",label:t("IP:Port"),sortable:!0},{key:"type",label:t("Type"),sortable:!0},{key:"status",sortable:!1,label:t("Status")},{key:"minecraft_version",sortable:!0,label:t("Version")},{key:"last_scanned_at",sortable:!0,label:t("Last Scanned")},{key:"actions",label:t("Actions"),sortable:!1,class:"w-1/12 text-right"}],m=S({}),u=S({});return O(()=>{T.servers.data.forEach(n=>{axios.get(route("server.ping.get",n.id)).then(()=>{v(()=>m[n.id]=1)}).catch(()=>{v(()=>m[n.id]=-1)}),n.type.value!==5&&n.webquery_port?axios.get(route("server.webquery.get",n.id)).then(()=>{v(()=>u[n.id]=1)}).catch(()=>{v(()=>u[n.id]=-1)}):u[n.id]=0})}),(n,w)=>{const j=B("app-head"),f=B("InertiaLink"),g=D("tippy"),q=D("confirm");return o(),c(E,null,{default:l(()=>[d(j,{title:e(t)("Manage Servers")},null,8,["title"]),a("div",M,[h.canCreateBungeeServer&&e(k)?(o(),c(W,{key:0,"close-button":!0,"text-color":"text-light-blue-800 dark:text-light-blue-500","border-color":"border-light-blue-500",onClose:w[0]||(w[0]=s=>k.value=!1)},{body:l(()=>[x(r(e(t)("When a bungee server is not added. Player List Box and Player Status Box (if enabled from settings), use first added server as default query server."))+" ",1),a("p",U,r(e(t)("Note: This is not an error. You can safely ignore this message if you don't have proxy server.")),1)]),default:l(()=>[x(r(e(t)("You don't have Bungee/Proxy Server Added!"))+" ",1)]),_:1})):y("",!0),a("div",Y,[a("h1",z,[x(r(e(t)("Servers"))+" ",1),e(p)("create servers")?_((o(),c(f,{key:0,as:"button",title:e(t)("MineTrax automatically scan all servers every hour for new players and statistics updates. Click here to force a scan now. Use it rarely."),href:n.route("admin.server.force-scan"),method:"post",class:"ml-2 inline-flex items-center px-4 py-2 border-2 border-red-600 rounded-md font-semibold text-xs text-red-600 uppercase tracking-widest focus:outline-none transition ease-in-out duration-150 dark:text-red-500 dark:border-red-700 hover:border-red-300 dark:hover:border-red-500 hover:bg-red-500 hover:text-white dark:hover:text-white"},{default:l(()=>[a("span",null,r(e(t)("Rescan all servers")),1)]),_:1},8,["title","href"])),[[g]]):y("",!0)]),a("div",F,[e(p)("create servers")&&h.canCreateBungeeServer?(o(),c(f,{key:0,href:n.route("admin.server.create-bungee"),class:"mr-1 inline-flex items-center px-4 py-2 border-2 border-gray-800 rounded-md font-semibold text-xs text-gray-800 uppercase tracking-widest focus:outline-none focus:border-gray-900 transition ease-in-out duration-150 dark:text-gray-300 dark:border-gray-700 dark:hover:border-gray-500"},{default:l(()=>[a("span",null,r(e(t)("Add Bungee Server")),1)]),_:1},8,["href"])):y("",!0),e(p)("create servers")?(o(),c(f,{key:1,href:n.route("admin.server.create"),class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:shadow-outline-gray transition ease-in-out duration-150"},{default:l(()=>[a("span",null,r(e(t)("Add")),1),a("span",G,"\xA0"+r(e(t)("Server")),1)]),_:1},8,["href"])):y("",!0)])]),d($,{class:"bg-white rounded shadow dark:bg-gray-800",header:I,data:h.servers,filters:h.filters},{default:l(({item:s})=>[a("td",J,r(s.id),1),d(b,null,{default:l(()=>[a("div",K,[a("div",X,[a("img",{class:"h-10 w-10",src:s.country.photo_path,alt:"Country Flag"},null,8,Z)]),a("div",ee,[a("div",te,r(s.name),1),a("div",re,r(s.hostname),1)])])]),_:2},1024),d(b,null,{default:l(()=>[a("div",se,r(s.ip_address)+" : "+r(s.join_port),1),a("div",ae,r(e(t)("WebQuery: :webquery_port",{webquery_port:s.webquery_port||e(t)("not set")})),1)]),_:2},1024),d(b,null,{default:l(()=>[x(r(s.type.key),1)]),_:2},1024),a("td",oe,[a("div",ne,[m[s.id]===1?(o(),i("span",le,r(e(t)("Server Online")),1)):m[s.id]===-1?(o(),i("span",de,r(e(t)("Server Offline")),1)):(o(),i("span",ie,r(e(t)("Loading"))+"...",1))]),a("div",ce,[u[s.id]===1?(o(),i("span",ue,r(e(t)("WebQuery Online")),1)):u[s.id]===-1?(o(),i("span",fe,r(e(t)("WebQuery Offline")),1)):u[s.id]===0?(o(),i("span",xe)):(o(),i("span",ye,r(e(t)("Loading"))+"...",1))])]),d(b,null,{default:l(()=>[x(r(s.minecraft_version),1)]),_:2},1024),d(b,null,{default:l(()=>[s.type.value===5?(o(),i("span",he,r(e(t)("not applicable")),1)):_((o(),i("span",{key:1,title:e(A)(s.last_scanned_at)},[x(r(s.last_scanned_at?e(C)(s.last_scanned_at):e(t)("not scanned yet")),1)],8,pe)),[[g]])]),_:2},1024),a("td",ge,[_((o(),c(f,{as:"a",title:e(t)("View Server Intel"),href:n.route("admin.server.show",s.id),class:"inline-flex items-center justify-center text-blue-500 hover:text-blue-800"},{default:l(()=>[d(e(Q),{class:"inline-block w-5 h-5"})]),_:2},1032,["title","href"])),[[g]]),e(p)("update servers")?_((o(),c(f,{key:0,as:"a",href:n.route("admin.server.edit",s.id),class:"inline-flex items-center justify-center text-yellow-600 dark:text-yellow-500 hover:text-yellow-800 dark:hover:text-yellow-800",title:e(t)("Edit Server")},{default:l(()=>[d(e(R),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[g]]):y("",!0),e(p)("delete servers")?_((o(),c(f,{key:1,as:"button",method:"DELETE",href:n.route("admin.server.delete",s.id),class:"inline-flex items-center justify-center text-red-600 hover:text-red-900 focus:outline-none",title:e(t)("Delete Server")},{default:l(()=>[d(e(H),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[q,{message:"Are you sure you want to delete this Server permanently?"}],[g]]):y("",!0)])]),_:1},8,["data","filters"])])]),_:1})}}};export{Ie as default};
