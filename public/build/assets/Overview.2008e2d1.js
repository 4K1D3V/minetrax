import{o as y,d as f,a as t,r as k,h as z,y as L,b as r,u as s,f as d,t as e,A as j,R as B,a0 as I,c as N,w as R,C as U}from"./app.5bc07c9e.js";import{r as M,_ as q,a as H}from"./AdminLayout.48b5d2f1.js";import{_ as V}from"./ServerIntelServerSelector.a6a58a63.js";import{_ as Y}from"./Chart.05021428.js";import{i as E}from"./index.es.1a8688ed.js";import{s as g,e as x,a as b,b as S,c as T,d as K,f as Z}from"./index.b406ec5e.js";import{a as G,r as F}from"./UserGroupIcon.4f80d1b5.js";import{u as C,I as p}from"./AppLayout.48200e20.js";import{_ as w}from"./millify.524d1bf5.js";import{L as J}from"./LoadingSpinner.9601a18a.js";import"./useAuthorizable.baba4420.js";import"./XSelect.cf7da78f.js";function $(i,_){return y(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})])}function O(i,_){return y(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.362 5.214A8.252 8.252 0 0112 21 8.25 8.25 0 016.038 7.048 8.287 8.287 0 009 9.6a8.983 8.983 0 013.361-6.867 8.21 8.21 0 003 2.48z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 18a3.75 3.75 0 00.495-7.467 5.99 5.99 0 00-1.925 3.546 5.974 5.974 0 01-2.133-1A3.75 3.75 0 0012 18z"})])}function Q(i,_){return y(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.636 5.636a9 9 0 1012.728 0M12 3v9"})])}function W(i,_){return y(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 013.75 9.375v-4.5zM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 01-1.125-1.125v-4.5zM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0113.5 9.375v-4.5z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 6.75h.75v.75h-.75v-.75zM6.75 16.5h.75v.75h-.75v-.75zM16.5 6.75h.75v.75h-.75v-.75zM13.5 13.5h.75v.75h-.75v-.75zM13.5 19.5h.75v.75h-.75v-.75zM19.5 13.5h.75v.75h-.75v-.75zM19.5 19.5h.75v.75h-.75v-.75zM16.5 16.5h.75v.75h-.75v-.75z"})])}const X={class:"w-full h-full p-3 space-y-8 bg-white rounded shadow dark:bg-cool-gray-800"},tt={class:"flex justify-between"},st={class:"font-extrabold text-gray-800 dark:text-gray-200 flex items-center"},et={__name:"ServerOnlineActivityOverTimeMetricBox",props:{servers:{type:Array,required:!1}},setup(i){const _=i,{__:a}=B();let l=k({}),u=k(null),m=k(!0),o=k(null);const v=z(()=>o.value===null||o.value.length<=0||o.value[0]===null||o.value[1]===null);async function D(){m.value=!0;let n={};v.value||(n.from_date=o.value[0],n.to_date=o.value[1]),_.servers&&_.servers.length>0&&(n.servers=_.servers);const c=await I.get(route("admin.graph.server-online-activity",n));m.value=!1,u.value=c.data,l.value={tooltip:{trigger:"axis",position:function(h){return[h[0],"10%"]}},legend:{},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}},xAxis:{type:"time"},yAxis:{type:"value",boundaryGap:[0,"10%"]},dataZoom:[{type:"inside",start:90,end:100,zoomLock:!0},{start:90,end:100}],series:u.value.labels.map((h,P)=>({name:h,type:"line",smooth:!0,symbol:"none",seriesLayoutBy:"column",encode:{y:P+1},emphasis:{focus:"series"}})),dataset:{source:u.value.data}}}L(async()=>{await D()});const A=[{text:a("Today"),onClick(){const n=new Date;return[g(n),x(n)]}},{text:a("Yesterday"),onClick(){const n=b(new Date,1);return[g(n),x(n)]}},{text:a("Last 7 Days"),onClick(){const n=new Date,c=b(n,7);return[g(c),x(n)]}},{text:a("Last 30 Days"),onClick(){const n=new Date,c=b(n,30);return[g(c),x(n)]}},{text:a("This Month"),onClick(){const n=new Date,c=S(n);return[g(c),x(n)]}},{text:a("Last Month"),onClick(){const n=new Date,c=S(T(n,1)),h=K(T(n,1));return[g(c),x(h)]}},{text:a("This Year"),onClick(){const n=new Date,c=Z(n);return[g(c),x(n)]}}];return(n,c)=>(y(),f("div",X,[t("div",tt,[t("h3",st,[r(s(G),{class:"w-6 mr-1"}),d(" "+e(s(a)("Server Online Activity")),1)]),r(s(E),{value:s(o),"onUpdate:value":c[0]||(c[0]=h=>j(o)?o.value=h:o=h),type:"date",range:"",placeholder:s(a)("View for date range"),"input-class":"block w-full p-2 text-sm border-gray-300 rounded-md focus:border-light-blue-300 focus:ring focus:ring-light-blue-200 focus:ring-opacity-50 dark:bg-cool-gray-900 dark:text-gray-300 dark:border-gray-900",shortcuts:A,onChange:c[1]||(c[1]=h=>D())},null,8,["value","placeholder"])]),r(Y,{options:s(l),height:"350px",loading:s(m),autoresize:!0},null,8,["options","loading"])]))}},at={class:"bg-white dark:bg-cool-gray-800 rounded w-full h-full p-3 shadow"},lt={class:"font-extrabold text-gray-800 dark:text-gray-200 flex mt-2 items-center"},ot={key:0,class:"h-80 flex justify-center items-center"},rt={key:1,class:"m-0 p-0"},nt={class:"table-auto min-w-full text-sm dark:text-gray-300 text-gray-700"},it={class:"border-b dark:border-gray-700"},dt=t("th",{scope:"col",class:"text-left p-2"},null,-1),ct={scope:"col",class:"text-left p-2"},_t={scope:"col",class:"text-left p-2"},ut={scope:"col",class:"text-left p-2"},ht={scope:"col",class:"text-left p-2"},pt={class:"p-2 flex"},yt={class:"p-2"},mt={class:"p-2"},ft={class:"p-2"},vt={class:"p-2"},gt={class:"p-2 flex"},xt={class:"p-2"},wt={class:"p-2"},kt={class:"p-2"},bt={class:"p-2"},$t={class:"p-2 flex"},Dt={class:"p-2"},Mt={class:"p-2"},St={class:"p-2"},Tt={class:"p-2"},Ot={class:"p-2 flex"},Lt={class:"p-2"},Ct={class:"p-2"},At={class:"p-2"},Pt={class:"p-2"},zt={class:"p-2 flex"},jt={class:"p-2"},Bt={class:"p-2"},It={class:"p-2"},Nt={class:"p-2"},Rt={class:"p-2 flex"},Ut={class:"p-2"},qt={class:"p-2"},Ht={class:"p-2"},Vt={class:"p-2"},Yt={class:"p-2 flex"},Et={class:"p-2"},Kt={class:"p-2"},Zt={class:"p-2"},Gt={class:"p-2"},Ft={class:"p-2 flex"},Jt={class:"p-2"},Qt={class:"p-2"},Wt={class:"p-2"},Xt={class:"p-2"},ts={class:"p-2 flex"},ss={class:"p-2"},es={class:"p-2"},as={class:"p-2"},ls={class:"p-2"},os={__name:"ServerIntelOverviewNumbersBox",props:{servers:{type:Array,required:!1}},setup(i){const _=i,{secondsToHMS:a}=C();let l=k(null),u=k(!0);async function m(){u.value=!0;let o={};_.servers&&_.servers.length>0&&(o.servers=_.servers);const v=await axios.get(route("admin.intel.server.index.numbers",o));u.value=!1,l.value=v.data.numbers}return L(async()=>{await m()}),(o,v)=>(y(),f("div",at,[t("h3",lt,[r(s(W),{class:"w-6 mr-1"}),d(" "+e(o.__("Numbers")),1)]),s(u)?(y(),f("div",ot,[r(J,{loading:s(u)},null,8,["loading"])])):(y(),f("div",rt,[t("table",nt,[t("thead",it,[t("tr",null,[dt,t("th",ct,e(o.__("Last 24 hours")),1),t("th",_t,e(o.__("Last 7 days")),1),t("th",ut,e(o.__("Last 30 days")),1),t("th",ht,e(o.__("All Time")),1)])]),t("tbody",null,[t("tr",null,[t("td",pt,[r(s(F),{class:"w-5 text-indigo-500 mr-1"}),d(" "+e(o.__("Total Players")),1)]),t("td",yt,e(s(l).total_players.last_24h),1),t("td",mt,e(s(l).total_players.last_7days),1),t("td",ft,e(s(l).total_players.last_30days),1),t("td",vt,e(s(l).total_players.all_time),1)]),t("tr",null,[t("td",gt,[r(s($),{class:"w-5 text-green-500 mr-1"}),d(" "+e(o.__("Total Play Time")),1)]),t("td",xt,e(s(a)(s(l).total_playtime.last_24h,!0)),1),t("td",wt,e(s(a)(s(l).total_playtime.last_7days,!0)),1),t("td",kt,e(s(a)(s(l).total_playtime.last_30days,!0)),1),t("td",bt,e(s(a)(s(l).total_playtime.all_time,!0)),1)]),t("tr",null,[t("td",$t,[r(s($),{class:"w-5 text-red-500 mr-1"}),d(" "+e(o.__("Total Afk Time")),1)]),t("td",Dt,e(s(a)(s(l).total_afktime.last_24h,!0)),1),t("td",Mt,e(s(a)(s(l).total_afktime.last_7days,!0)),1),t("td",St,e(s(a)(s(l).total_afktime.last_30days,!0)),1),t("td",Tt,e(s(a)(s(l).total_afktime.all_time,!0)),1)]),t("tr",null,[t("td",Ot,[r(s(M),{class:"w-5 text-green-500 mr-1"}),d(" "+e(o.__("Total Sessions")),1)]),t("td",Lt,e(s(l).total_sessions.last_24h),1),t("td",Ct,e(s(l).total_sessions.last_7days),1),t("td",At,e(s(l).total_sessions.last_30days),1),t("td",Pt,e(s(l).total_sessions.all_time),1)]),t("tr",null,[t("td",zt,[r(s(M),{class:"w-5 text-lime-500 mr-1"}),d(" "+e(o.__("Avg Session / Player")),1)]),t("td",jt,e(s(w)(s(l).avg_session_per_player.last_24h,{precision:2})),1),t("td",Bt,e(s(w)(s(l).avg_session_per_player.last_7days,{precision:2})),1),t("td",It,e(s(w)(s(l).avg_session_per_player.last_30days,{precision:2})),1),t("td",Nt,e(s(w)(s(l).avg_session_per_player.all_time,{precision:2})),1)]),t("tr",null,[t("td",Rt,[r(s($),{class:"w-5 text-amber-500 mr-1"}),d(" "+e(o.__("Avg Session Playtime")),1)]),t("td",Ut,e(s(a)(s(l).avg_session_playtime.last_24h,!0)),1),t("td",qt,e(s(a)(s(l).avg_session_playtime.last_7days,!0)),1),t("td",Ht,e(s(a)(s(l).avg_session_playtime.last_30days,!0)),1),t("td",Vt,e(s(a)(s(l).avg_session_playtime.all_time,!0)),1)]),t("tr",null,[t("td",Yt,[r(s(O),{class:"w-5 text-pink-500 mr-1"}),d(" "+e(o.__("Total Player Kills")),1)]),t("td",Et,e(s(l).total_player_kills.last_24h),1),t("td",Kt,e(s(l).total_player_kills.last_7days),1),t("td",Zt,e(s(l).total_player_kills.last_30days),1),t("td",Gt,e(s(l).total_player_kills.all_time),1)]),t("tr",null,[t("td",Ft,[r(s(O),{class:"w-5 text-green-500 mr-1"}),d(" "+e(o.__("Total Mob Kills")),1)]),t("td",Jt,e(s(l).total_mob_kills.last_24h),1),t("td",Qt,e(s(l).total_mob_kills.last_7days),1),t("td",Wt,e(s(l).total_mob_kills.last_30days),1),t("td",Xt,e(s(l).total_mob_kills.all_time),1)]),t("tr",null,[t("td",ts,[r(p,{name:"skull-outline",class:"w-5 text-green-500 mr-1"}),d(" "+e(o.__("Total Deaths")),1)]),t("td",ss,e(s(l).total_deaths.last_24h),1),t("td",es,e(s(l).total_deaths.last_7days),1),t("td",as,e(s(l).total_deaths.last_30days),1),t("td",ls,e(s(l).total_deaths.all_time),1)])])])]))]))}},rs={class:"p-4 mx-auto space-y-4 max-w-7xl"},ns={id:"row1"},is={id:"row2",class:"flex justify-between flex-1 space-x-4"},ds={class:"bg-white dark:bg-cool-gray-800 rounded w-full shadow basis-2/6 p-3"},cs={class:"font-extrabold text-gray-800 dark:text-gray-200 flex mt-2 items-center"},_s={class:"flex flex-col text-sm mt-5"},us={class:"table-auto min-w-full dark:text-gray-300 text-gray-700"},hs={class:"py-2 flex"},ps={class:"p-2 text-right"},ys={class:"py-2 flex"},ms={class:"p-2 text-right"},fs={class:"py-2 flex"},vs={class:"p-2 text-right"},gs={class:"py-2 flex"},xs={class:"p-2 text-right"},ws={class:"py-2 flex"},ks={class:"p-2 text-right"},bs={class:"py-2 flex"},$s={class:"p-2 text-right"},Ds={class:"py-2 flex"},Ms={class:"p-2 text-right"},Ss={class:"py-2 flex"},Ts={class:"p-2 text-right"},Os={class:"py-2 flex"},Ls={class:"p-2 pb-5 text-right"},Vs={__name:"Overview",props:{serverList:{type:Object},filters:{type:Object},last7DaysStats:{type:Object}},setup(i){const{secondsToHMS:_}=C();return(a,l)=>(y(),N(q,null,{default:R(()=>{var u,m,o,v;return[r(U,{title:a.__("Overview - ServerIntel")},null,8,["title"]),t("div",rs,[r(V,{title:a.__("Server Overview"),"server-list":i.serverList,filters:i.filters},null,8,["title","server-list","filters"]),t("div",ns,[r(et,{servers:(u=i.filters)==null?void 0:u.servers},null,8,["servers"])]),t("div",is,[r(os,{servers:(m=i.filters)==null?void 0:m.servers},null,8,["servers"]),t("div",ds,[t("h3",cs,[r(s(H),{class:"w-6 mr-1"}),d(" "+e(a.__("Last 7 Days")),1)]),t("div",_s,[t("table",us,[t("tbody",null,[t("tr",null,[t("td",hs,[r(p,{name:"users",class:"w-5 text-indigo-500 mr-1"}),d(" "+e(a.__("Unique Players")),1)]),t("td",ps,e(i.last7DaysStats.uniquePlayersCount),1)]),t("tr",null,[t("td",ys,[r(p,{name:"users",class:"w-5 text-lime-500 mr-1"}),d(" "+e(a.__("New Players")),1)]),t("td",ms,e(i.last7DaysStats.newPlayersCount),1)]),t("tr",null,[t("td",fs,[r(p,{name:"users",class:"w-5 text-gray-500 mr-1"}),d(" "+e(a.__("Old Players")),1)]),t("td",vs,e(i.last7DaysStats.oldPlayersCount),1)]),t("tr",null,[t("td",gs,[r(p,{name:"users",class:"w-5 text-green-500 mr-1"}),d(" "+e(a.__("Peak Online Players")),1)]),t("td",xs,e((o=i.last7DaysStats.peekOnlinePlayersCount)!=null?o:a.__("none")),1)]),t("tr",null,[t("td",ws,[r(p,{name:"joystick",class:"w-5 text-lime-500 mr-1"}),d(" "+e(a.__("Avg TPS")),1)]),t("td",ks,e(i.last7DaysStats.averageTps?s(w)(i.last7DaysStats.averageTps,{precision:2}):a.__("none")),1)]),t("tr",null,[t("td",bs,[r(p,{name:"joystick",class:"w-5 text-red-500 mr-1"}),d(" "+e(a.__("Lowest TPS")),1)]),t("td",$s,e(i.last7DaysStats.lowestTps?s(w)(i.last7DaysStats.lowestTps,{precision:2}):a.__("none")),1)]),t("tr",null,[t("td",Ds,[r(p,{name:"cpu",class:"w-5 text-blue-500 mr-1"}),d(" "+e(a.__("Avg CPU Load")),1)]),t("td",Ms,e(i.last7DaysStats.averageCpuLoad?s(w)(i.last7DaysStats.averageCpuLoad,{precision:2}):a.__("none")),1)]),t("tr",null,[t("td",Ss,[r(s(Q),{class:"w-5 text-green-500 mr-1"}),d(" "+e(a.__("Longest Uptime")),1)]),t("td",Ts,e(i.last7DaysStats.longestUptime?s(_)(i.last7DaysStats.longestUptime):a.__("none")),1)]),t("tr",null,[t("td",Os,[r(p,{name:"toggle-off",class:"w-5 text-red-500 mr-1"}),d(" "+e(a.__("Restarts")),1)]),t("td",Ls,e((v=i.last7DaysStats.noOfRestarts)!=null?v:a.__("none")),1)])])])])])])])]}),_:1}))}};export{Vs as default};
