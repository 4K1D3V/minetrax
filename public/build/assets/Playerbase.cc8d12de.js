import{r as d,h as k,y as C,o as D,d as O,a as y,t as M,u as i,b as c,A as L,I as A,a4 as $,c as j,w as Y,C as B}from"./app.022acd9e.js";import{_ as R}from"./AdminLayout.1af8536d.js";import{_ as V}from"./ServerIntelServerSelector.6f9127ad.js";import{_ as H,a as z,b as Z}from"./PlayersMinecraftVersionMetricBox.5ab03435.js";import{_ as T}from"./Chart.d272c4d5.js";import{i as I}from"./index.es.e3c4e30a.js";import{s as o,e as n,a as g,b as x,c as b,d as P,f as S}from"./index.eed109cb.js";import"./AppLayout.17897658.js";import"./useAuthorizable.0bc75914.js";import"./XSelect.ee7011cf.js";const E={class:"bg-white dark:bg-cool-gray-800 rounded w-full h-full space-y-2 p-3 shadow"},q={class:"flex justify-between"},J={class:"font-extrabold text-gray-800 dark:text-gray-200 flex items-center"},N={__name:"PlayersJoinAddressOverTimeMetricBox",props:{servers:{type:Array,required:!1},chartHeight:{type:String,default:"400px"}},setup(l){const f=l,{__:s}=A();let u=d({}),v=d([]),h=d([]),p=d(!0),a=d(null);const _=k(()=>a.value===null||a.value.length<=0||a.value[0]===null||a.value[1]===null);async function m(){p.value=!0;let e={};_.value||(e.from_date=a.value[0],e.to_date=a.value[1]),f.servers&&f.servers.length>0&&(e.servers=f.servers);const t=await $.get(route("admin.graph.player-join-addresses.timeseries",e));p.value=!1,v.value=t.data.data,h.value=t.data.series,u.value={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}},dataZoom:[{type:"inside",zoomLock:!0},{}],xAxis:{type:"time"},yAxis:{type:"value"},series:h.value.map(r=>({name:r,type:"bar",stack:"total",emphasis:{focus:"series"},datasetIndex:h.value.indexOf(r)})),dataset:v.value}}C(async()=>{await m()});const w=[{text:s("Today"),onClick(){const e=new Date;return[o(e),n(e)]}},{text:s("Yesterday"),onClick(){const e=g(new Date,1);return[o(e),n(e)]}},{text:s("Last 7 Days"),onClick(){const e=new Date,t=g(e,7);return[o(t),n(e)]}},{text:s("Last 30 Days"),onClick(){const e=new Date,t=g(e,30);return[o(t),n(e)]}},{text:s("This Month"),onClick(){const e=new Date,t=x(e);return[o(t),n(e)]}},{text:s("Last Month"),onClick(){const e=new Date,t=x(b(e,1)),r=P(b(e,1));return[o(t),n(r)]}},{text:s("This Year"),onClick(){const e=new Date,t=S(e);return[o(t),n(e)]}}];return(e,t)=>(D(),O("div",E,[y("div",q,[y("h3",J,M(i(s)("Join Addresses over time")),1),c(i(I),{value:i(a),"onUpdate:value":t[0]||(t[0]=r=>L(a)?a.value=r:a=r),type:"date",range:"",placeholder:i(s)("View for date range"),"input-class":"block w-full p-2 text-sm border-gray-300 rounded-md focus:border-light-blue-300 focus:ring focus:ring-light-blue-200 focus:ring-opacity-50 dark:bg-cool-gray-900 dark:text-gray-300 dark:border-gray-900",shortcuts:w,onChange:t[1]||(t[1]=r=>m())},null,8,["value","placeholder"])]),c(T,{options:i(u),height:l.chartHeight,loading:i(p),autoresize:!0},null,8,["options","height","loading"])]))}},U={class:"bg-white dark:bg-cool-gray-800 rounded w-full h-full space-y-2 p-3 shadow"},F={class:"flex justify-between"},G={class:"font-extrabold text-gray-800 dark:text-gray-200 flex items-center"},K={__name:"PlayersMinecraftVersionOverTimeMetricBox",props:{servers:{type:Array,required:!1},chartHeight:{type:String,default:"400px"}},setup(l){const f=l,{__:s}=A();let u=d({}),v=d([]),h=d([]),p=d(!0),a=d(null);const _=k(()=>a.value===null||a.value.length<=0||a.value[0]===null||a.value[1]===null);async function m(){p.value=!0;let e={};_.value||(e.from_date=a.value[0],e.to_date=a.value[1]),f.servers&&f.servers.length>0&&(e.servers=f.servers);const t=await $.get(route("admin.graph.player-minecraft-versions.timeseries",e));p.value=!1,v.value=t.data.data,h.value=t.data.series,u.value={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}},dataZoom:[{type:"inside",zoomLock:!0},{}],xAxis:{type:"time"},yAxis:{type:"value"},series:h.value.map(r=>({name:r,type:"bar",stack:"total",emphasis:{focus:"series"},datasetIndex:h.value.indexOf(r)})),dataset:v.value}}C(async()=>{await m()});const w=[{text:s("Today"),onClick(){const e=new Date;return[o(e),n(e)]}},{text:s("Yesterday"),onClick(){const e=g(new Date,1);return[o(e),n(e)]}},{text:s("Last 7 Days"),onClick(){const e=new Date,t=g(e,7);return[o(t),n(e)]}},{text:s("Last 30 Days"),onClick(){const e=new Date,t=g(e,30);return[o(t),n(e)]}},{text:s("This Month"),onClick(){const e=new Date,t=x(e);return[o(t),n(e)]}},{text:s("Last Month"),onClick(){const e=new Date,t=x(b(e,1)),r=P(b(e,1));return[o(t),n(r)]}},{text:s("This Year"),onClick(){const e=new Date,t=S(e);return[o(t),n(e)]}}];return(e,t)=>(D(),O("div",U,[y("div",F,[y("h3",G,M(i(s)("Player Client Versions over time")),1),c(i(I),{value:i(a),"onUpdate:value":t[0]||(t[0]=r=>L(a)?a.value=r:a=r),type:"date",range:"",placeholder:i(s)("View for date range"),"input-class":"block w-full p-2 text-sm border-gray-300 rounded-md focus:border-light-blue-300 focus:ring focus:ring-light-blue-200 focus:ring-opacity-50 dark:bg-cool-gray-900 dark:text-gray-300 dark:border-gray-900",shortcuts:w,onChange:t[1]||(t[1]=r=>m())},null,8,["value","placeholder"])]),c(T,{options:i(u),height:l.chartHeight,loading:i(p),autoresize:!0},null,8,["options","height","loading"])]))}},Q={class:"p-4 mx-auto space-y-4 px-10"},W={id:"row1"},X={id:"row2",class:"flex justify-between flex-1 space-x-4"},ee={id:"row3",class:"flex justify-between flex-1 space-x-4"},de={__name:"Playerbase",props:{serverList:{type:Object},filters:{type:Object}},setup(l){const f=l,s=k(()=>{var u;return route("admin.intel.server.playerbase.countries",{servers:(u=f.filters)==null?void 0:u.servers})});return(u,v)=>(D(),j(R,null,{default:Y(()=>[c(B,{title:u.__("Playerbase - ServerIntel")},null,8,["title"]),y("div",Q,[c(V,{title:u.__("Playerbase"),"server-list":l.serverList,filters:l.filters},null,8,["title","server-list","filters"]),y("div",W,[c(H,{"map-height":"500px","route-name":i(s)},null,8,["route-name"])]),y("div",X,[c(N,{"chart-height":"387px",class:"basis-2/3",servers:l.filters.servers},null,8,["servers"]),c(z,{class:"basis-1/3","chart-height":"400px",servers:l.filters.servers},null,8,["servers"])]),y("div",ee,[c(K,{class:"basis-2/3","chart-height":"387px",servers:l.filters.servers},null,8,["servers"]),c(Z,{class:"basis-1/3","chart-height":"400px",servers:l.filters.servers},null,8,["servers"])])])]),_:1}))}};export{de as default};
