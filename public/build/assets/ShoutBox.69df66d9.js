import{I as w}from"./AppLayout.0a48a2f0.js";import{_ as S,z as _,B as x,o as t,d as r,a as o,t as a,e as d,F as v,h as T,x as g,C as D,U as B,b as c,w as u,f as i,I as b,c as k,m as N}from"./app.9fb1098e.js";const V={components:{Icon:w},data(){return{shouts:[],message:"",error:null,loading:!0,sending:!1}},created(){axios.get(route("shout.index")).then(e=>{this.shouts=e.data}).finally(()=>{this.loading=!1}),Echo.channel("shouts").listen("ShoutCreated",e=>{this.shouts.unshift(e.data)})},methods:{sendShout(){this.sending=!0,this.error=null,axios.post(route("shout.store"),{message:this.message}).then(e=>{e.status===200&&this.shouts.unshift(e.data)}).catch(e=>{e.response.status===422?this.error=e.response.data.errors.message[0]:e.response.status===403?this.error=e.response.data.message:this.error=this.__("Something went wrong. Try again.")}).finally(()=>{this.message="",this.sending=!1,this.$nextTick(()=>{this.$refs.inputbox.focus()})})}}},C={key:0},j={class:"p-3 space-y-4 bg-white rounded shadow dark:bg-cool-gray-800"},F={class:"font-extrabold text-gray-800 dark:text-gray-200"},I={class:"flex-col space-y-4 overflow-auto max-h-96 hide-scrollbar"},M={key:0,class:"space-y-4"},$=N('<div class="w-full max-w-sm mx-auto"><div class="flex space-x-4 animate-pulse"><div class="w-8 h-8 bg-gray-300 rounded-full dark:bg-cool-gray-700"></div><div class="flex-1 py-1 space-y-1"><div class="w-3/4 h-4 bg-gray-300 rounded dark:bg-cool-gray-700"></div><div class="w-5/6 h-4 bg-gray-300 rounded dark:bg-cool-gray-700"></div></div></div></div><div class="w-full max-w-sm mx-auto"><div class="flex space-x-4 animate-pulse"><div class="w-8 h-8 bg-gray-300 rounded-full dark:bg-cool-gray-700"></div><div class="flex-1 py-1 space-y-1"><div class="w-3/4 h-4 bg-gray-300 rounded dark:bg-cool-gray-700"></div><div class="w-5/6 h-4 bg-gray-300 rounded dark:bg-cool-gray-700"></div></div></div></div>',2),z=[$],A={key:0,class:"flex"},E={class:"items-start order-2 max-w-xs mx-2 space-y-2 text-sm"},K={class:"flex flex-col inline-block px-4 py-2 text-gray-700 bg-gray-100 rounded-tl-lg rounded-2xl dark:bg-cool-gray-600 dark:bg-opacity-25 dark:text-gray-200"},L=["title"],R={class:"text-justify"},U=["src"],q={key:1,class:"flex justify-end"},G={class:"items-start order-1 max-w-xs mx-2 space-y-2 text-sm"},H={class:"flex flex-col inline-block px-4 py-2 text-gray-700 rounded-tr-lg rounded-2xl bg-light-blue-100 dark:bg-cool-gray-900 dark:bg-opacity-40 dark:text-gray-200"},J={class:"text-right"},O=["title"],P={class:"text-justify"},Q=["src"],W={key:0},X=["disabled","placeholder"],Y={key:1,class:"text-xs text-red-400"},Z={key:1,class:"text-sm text-center text-gray-600 dark:text-gray-400"};function ee(e,h,se,te,l,p){const n=_("inertia-link"),y=_("icon"),f=x("tippy"),m=x("confirm");return e.$page.props.generalSettings.enable_shoutbox?(t(),r("div",C,[o("div",j,[o("h3",F,a(e.__("Shout Box")),1),o("div",I,[l.loading?(t(),r("div",M,z)):d("",!0),(t(!0),r(v,null,T(l.shouts,s=>(t(),r("div",{key:s.id,class:"chat-message"},[!e.$page.props.user||s.user_id!==e.$page.props.user.id?(t(),r("div",A,[o("div",E,[o("div",K,[o("div",null,[c(n,{as:"span",href:e.route("user.public.get",s.user.username),class:"font-semibold cursor-pointer hover:underline",style:b([s.user.roles[0].color?{color:s.user.roles[0].color}:null])},{default:u(()=>[i(a(s.user.username),1)]),_:2},1032,["href","style"]),g((t(),r("span",{class:"ml-1 text-xs text-gray-500 dark:text-gray-400 focus:outline-none",title:e.formatToDayDateString(s.created_at)},[i(a(e.formatTimeAgoToNow(s.created_at,!1)),1)],8,L)),[[f]])]),o("span",R,a(s.message),1)])]),o("img",{src:s.user.profile_photo_url,alt:"My profile",class:"order-1 w-8 h-8 mt-2 rounded-full"},null,8,U),e.$page.props.user&&s.permissions.delete?g((t(),k(n,{key:0,class:"order-3 focus:outline-none","preserve-state":!1,as:"button",method:"delete",href:e.route("shout.delete",s.id)},{default:u(()=>[c(y,{class:"w-4 h-4 text-gray-200 dark:text-gray-500 hover:text-red-400 dark:hover:text-red-500",name:"trash"})]),_:2},1032,["href"])),[[m,{message:e.__("Delete this shout permanently?")}]]):d("",!0)])):(t(),r("div",q,[e.$page.props.user&&s.permissions.delete?g((t(),k(n,{key:0,class:"focus:outline-none","preserve-state":!1,as:"button",method:"delete",href:e.route("shout.delete",s.id)},{default:u(()=>[c(y,{class:"w-4 h-4 text-gray-200 dark:text-gray-500 hover:text-red-400 dark:hover:text-red-500",name:"trash"})]),_:2},1032,["href"])),[[m,{message:e.__("Delete this shout permanently?")}]]):d("",!0),o("div",G,[o("div",H,[o("div",J,[g((t(),r("span",{class:"mr-1 text-xs text-gray-500 dark:text-gray-400 focus:outline-none",title:e.formatToDayDateString(s.created_at)},[i(a(e.formatTimeAgoToNow(s.created_at,!1)),1)],8,O)),[[f]]),c(n,{as:"span",href:e.route("user.public.get",s.user.username),class:"font-semibold cursor-pointer hover:underline",style:b([s.user.roles[0].color?{color:s.user.roles[0].color}:null])},{default:u(()=>[i(a(s.user.username),1)]),_:2},1032,["href","style"])]),o("span",P,a(s.message),1)])]),o("img",{src:s.user.profile_photo_url,alt:"My profile",class:"order-2 w-8 h-8 mt-2 rounded-full"},null,8,Q)]))]))),128))]),e.$page.props.user?(t(),r("div",W,[l.loading?d("",!0):g((t(),r("input",{key:0,ref:"inputbox","onUpdate:modelValue":h[0]||(h[0]=s=>l.message=s),disabled:l.sending,"aria-label":"Shout",class:"block w-full mt-1 bg-gray-100 border-none rounded-md focus:ring-gray-300 sm:text-sm disabled:opacity-50 focus:bg-white dark:bg-cool-gray-900 dark:text-gray-200 dark:focus:ring-gray-700",type:"text",placeholder:e.__("Say something.."),onKeypress:h[1]||(h[1]=B((...s)=>p.sendShout&&p.sendShout(...s),["enter"]))},null,40,X)),[[D,l.message]]),l.error?(t(),r("span",Y,a(l.error),1)):d("",!0)])):(t(),r("div",Z,[c(n,{class:"font-semibold text-light-blue-500",href:e.route("login")},{default:u(()=>[i(a(e.__("Login")),1)]),_:1},8,["href"]),e.$page.props.hasRegistrationFeature?(t(),r(v,{key:0},[i(a(" "+e.__("or"))+" ",1),c(n,{class:"font-semibold text-light-blue-500",href:e.route("register")},{default:u(()=>[i(a(e.__("Register")),1)]),_:1},8,["href"])],64)):d("",!0),i(" "+a(e.__("to Shout")),1)]))])])):d("",!0)}const ae=S(V,[["render",ee]]);export{ae as S};
