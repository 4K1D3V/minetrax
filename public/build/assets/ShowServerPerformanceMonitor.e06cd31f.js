import C from"./ServerSubMenu.1a9665fc.js";import{I as u,a as f}from"./AppLayout.0f9b2e6b.js";import{_ as v}from"./Chart.5493682a.js";import{_ as h,o as p,d as g,a as e,b as a,f as r,t,l as n,a2 as A,c as B,w as D}from"./app.debd0895.js";import{i as L}from"./index.es.2aa26fe5.js";import{_ as P}from"./AdminLayout.bf786d29.js";const T={name:"ServerCpuMetricBox",components:{Chart:v,Icon:u},props:{serverId:{type:Number,default:null},liveInfo:{type:Array,default:null}},setup(){const{formatToDayDateString:s}=f();return{formatToDayDateString:s}},beforeMount(){this.options={xAxis:{type:"category",boundaryGap:!1},yAxis:{type:"value"},tooltip:{trigger:"axis"},series:[{type:"line",symbol:"none",areaStyle:{}}],dataset:{source:this.liveInfo.map(s=>({[this.__("Date")]:this.formatToDayDateString(s.created_at),[this.__("Cpu Load")]:s.cpu_load}))}}}},I={class:"bg-white dark:bg-cool-gray-800 rounded w-full h-full space-y-2 p-3 shadow"},q={class:"font-extrabold text-gray-800 dark:text-gray-200 flex items-center"};function F(s,_,o,y,d,m){const i=n("icon"),c=n("Chart");return p(),g("div",I,[e("h3",q,[a(i,{name:"cpu",class:"w-6 mr-1"}),r(" "+t(s.__("CPU Load")),1)]),a(c,{options:s.options,height:"300px"},null,8,["options"])])}const U=h(T,[["render",F]]),R={name:"ServerRamMetricBox",components:{Chart:v,Icon:u},props:{serverId:{type:Number,default:null},liveInfo:{type:Array,default:null}},setup(){const{formatToDayDateString:s}=f();return{formatToDayDateString:s}},beforeMount(){this.options={xAxis:{type:"category",boundaryGap:!1},yAxis:{type:"value"},tooltip:{trigger:"axis"},series:[{type:"line",symbol:"none",areaStyle:{}}],dataset:{source:this.liveInfo.map(s=>({[this.__("Date")]:this.formatToDayDateString(s.created_at),[this.__("Used Memory (MB)")]:Math.round(s.used_memory/1024)}))}}}},G={class:"bg-white dark:bg-cool-gray-800 rounded w-full h-full space-y-2 p-3 shadow"},N={class:"font-extrabold text-gray-800 dark:text-gray-200 flex items-center"};function O(s,_,o,y,d,m){const i=n("icon"),c=n("Chart");return p(),g("div",G,[e("h3",N,[a(i,{name:"ram",class:"w-6 mr-1"}),r(" "+t(s.__("Memory Usage")),1)]),a(c,{options:s.options,height:"300px"},null,8,["options"])])}const j=h(R,[["render",O]]),V={name:"ServerAllLiveStatsBox",components:{Chart:v,Icon:u},props:{serverId:{type:Number,default:null},liveInfo:{type:Array,default:null}},setup(){const{formatToDayDateString:s}=f();return{formatToDayDateString:s}},beforeMount(){this.options={xAxis:{type:"category",boundaryGap:!1},yAxis:{type:"value"},tooltip:{trigger:"axis"},legend:{},series:[{name:this.__("Online Players"),type:"line",symbol:"none"},{name:this.__("CPU Load"),type:"line",symbol:"none"},{name:this.__("Memory Usage"),type:"line",symbol:"none"},{name:this.__("TPS"),type:"line",symbol:"none"},{name:this.__("Chunks Loaded"),type:"line",symbol:"none"}],dataset:{source:this.liveInfo.map(s=>({[this.__("Date")]:this.formatToDayDateString(s.created_at),[this.__("Online Players")]:s.online_players,[this.__("Cpu Load")]:s.cpu_load,[this.__("Memory Usage")]:Math.round(s.used_memory/1024),[this.__("TPS")]:s.tps,[this.__("Chunks Loaded")]:s.chunks_loaded}))}}}},E={class:"bg-white dark:bg-cool-gray-800 rounded w-full h-full space-y-2 p-3 shadow"},H={class:"font-extrabold text-gray-800 dark:text-gray-200 flex items-center"};function z(s,_,o,y,d,m){const i=n("icon"),c=n("Chart");return p(),g("div",E,[e("h3",H,[a(i,{name:"server",class:"w-6 mr-1"}),r(" "+t(s.__("Server Performance")),1)]),a(c,{options:s.options,height:"300px"},null,8,["options"])])}const J=h(V,[["render",z]]),K={components:{AdminLayout:P,ServerAllLiveStatsBox:J,ServerRamMetricBox:j,ServerCpuMetricBox:U,ServerSubMenu:C,DatePicker:L,Icon:u},props:{server:Object,serverLiveInfo:Array,queryParams:Object,numbers:Object},data(){return{dateRange:[this.queryParams.dateFrom?new Date(this.queryParams.dateFrom):null,this.queryParams.dateTo?new Date(this.queryParams.dateTo):null],query:{dateFrom:this.queryParams.dateFrom,dateTo:this.queryParams.dateTo}}},methods:{filter(){this.query={dateFrom:this.dateRange[0],dateTo:this.dateRange[1]},this.$inertia.get(route("admin.server.show.perfmon",this.server.id),A.exports.pickBy(this.query))}}},Q={class:"py-12 px-10 max-w-6xl mx-auto space-y-4"},W={class:"flex justify-between"},X={class:"text-2xl text-gray-600 dark:text-gray-200"},Y={class:"font-bold"},Z={class:"font-bold"},$={class:"flex space-x-2"},ee={class:"flex"},te={class:"flex"},se={class:"bg-white dark:bg-cool-gray-800 rounded w-full h-full space-y-2 p-3 shadow"},oe={class:"font-extrabold text-gray-800 dark:text-gray-200 flex items-center"},ae={class:""},ne={class:"table-auto min-w-full text-sm dark:text-gray-300 text-gray-700"},re={class:"border-b dark:border-gray-700"},le=e("th",{scope:"col",class:"text-left p-2"},null,-1),_e={scope:"col",class:"text-left p-2"},ie={scope:"col",class:"text-left p-2"},ce={scope:"col",class:"text-left p-2"},de={scope:"col",class:"text-left p-2"},me={class:"p-2 flex"},ue={class:"p-2"},he={class:"p-2"},pe={class:"p-2"},ye={class:"p-2"},fe={class:"p-2 flex"},ve={class:"p-2"},ge={class:"p-2"},be={class:"p-2"},xe={class:"p-2"},we={class:"p-2 flex"},ke={class:"p-2"},Me={class:"p-2"},Se={class:"p-2"},Ce={class:"p-2"},Ae={class:"p-2 flex"},Be={class:"p-2"},De={class:"p-2"},Le={class:"p-2"},Pe={class:"p-2"},Te={class:"p-2 flex"},Ie={class:"p-2"},qe={class:"p-2"},Fe={class:"p-2"},Ue={class:"p-2"},Re={class:"p-2 flex"},Ge={class:"p-2"},Ne={class:"p-2"},Oe={class:"p-2"},je={class:"p-2"},Ve={class:"p-2 flex"},Ee={class:"p-2"},He={class:"p-2"},ze={class:"p-2"},Je={class:"p-2"};function Ke(s,_,o,y,d,m){const i=n("app-head"),c=n("date-picker"),x=n("server-sub-menu"),w=n("server-cpu-metric-box"),k=n("server-ram-metric-box"),M=n("server-all-live-stats-box"),l=n("icon"),S=n("AdminLayout");return p(),B(S,null,{default:D(()=>[a(i,{title:s.__("Server #:id",{id:o.server.id})},null,8,["title"]),e("div",Q,[e("div",W,[e("h2",X,[e("span",Y,"#"+t(o.server.id),1),r(" - "),e("span",Z,t(o.server.name),1)]),a(c,{value:d.dateRange,"onUpdate:value":_[0]||(_[0]=b=>d.dateRange=b),type:"date",range:"",placeholder:"View graph for range","input-class":"border-gray-300 p-2 text-sm focus:border-light-blue-300 focus:ring focus:ring-light-blue-200 focus:ring-opacity-50 rounded-md block w-full dark:bg-cool-gray-800 dark:text-gray-300 dark:border-gray-800",onChange:_[1]||(_[1]=b=>m.filter())},null,8,["value"])]),a(x,{id:o.server.id},null,8,["id"]),e("div",$,[a(w,{"server-id":o.server.id,"live-info":o.serverLiveInfo},null,8,["server-id","live-info"]),a(k,{"server-id":o.server.id,"live-info":o.serverLiveInfo},null,8,["server-id","live-info"])]),e("div",ee,[a(M,{"server-id":o.server.id,"live-info":o.serverLiveInfo},null,8,["server-id","live-info"])]),e("div",te,[e("div",se,[e("h3",oe,[a(l,{name:"calculator",class:"w-6 mr-1"}),r(" "+t(s.__("Numbers")),1)]),e("div",ae,[e("table",ne,[e("thead",re,[e("tr",null,[le,e("th",_e,t(s.__("Last 24 hours")),1),e("th",ie,t(s.__("Last week")),1),e("th",ce,t(s.__("Last month")),1),e("th",de,t(s.__("All time")),1)])]),e("tbody",null,[e("tr",null,[e("td",me,[a(l,{name:"users",class:"w-5 text-green-500 mr-1"}),r(" "+t(s.__("Max Online Players")),1)]),e("td",ue,t(o.numbers.max_players.last_24h),1),e("td",he,t(o.numbers.max_players.last_week),1),e("td",pe,t(o.numbers.max_players.last_month),1),e("td",ye,t(o.numbers.max_players.all_time),1)]),e("tr",null,[e("td",fe,[a(l,{name:"joystick",class:"w-5 text-pink-500 mr-1"}),r(" "+t(s.__("Lowest TPS")),1)]),e("td",ve,t(o.numbers.low_tps.last_24h),1),e("td",ge,t(o.numbers.low_tps.last_week),1),e("td",be,t(o.numbers.low_tps.last_month),1),e("td",xe,t(o.numbers.low_tps.all_time),1)]),e("tr",null,[e("td",we,[a(l,{name:"cpu",class:"w-5 text-blue-500 mr-1"}),r(" "+t(s.__("Avg CPU Usage")),1)]),e("td",ke,t(o.numbers.avg_cpu.last_24h.toFixed(2))+"% ",1),e("td",Me,t(o.numbers.avg_cpu.last_week.toFixed(2))+"% ",1),e("td",Se,t(o.numbers.avg_cpu.last_month.toFixed(2))+"% ",1),e("td",Ce,t(o.numbers.avg_cpu.all_time.toFixed(2))+"% ",1)]),e("tr",null,[e("td",Ae,[a(l,{name:"ram",class:"w-5 text-orange-500 mr-1"}),r(" "+t(s.__("Avg RAM Usage")),1)]),e("td",Be,t(Math.round(o.numbers.avg_memory.last_24h/1024))+" MB ",1),e("td",De,t(Math.round(o.numbers.avg_memory.last_week/1024))+" MB ",1),e("td",Le,t(Math.round(o.numbers.avg_memory.last_month/1024))+" MB ",1),e("td",Pe,t(Math.round(o.numbers.avg_memory.all_time/1024))+" MB ",1)]),e("tr",null,[e("td",Te,[a(l,{name:"grid",class:"w-5 text-purple-500 mr-1"}),r(" "+t(s.__("Avg Chunks Loaded")),1)]),e("td",Ie,t(Math.round(o.numbers.avg_chunks.last_24h)),1),e("td",qe,t(Math.round(o.numbers.avg_chunks.last_week)),1),e("td",Fe,t(Math.round(o.numbers.avg_chunks.last_month)),1),e("td",Ue,t(Math.round(o.numbers.avg_chunks.all_time)),1)]),e("tr",null,[e("td",Re,[a(l,{name:"server",class:"w-5 text-light-blue-500 mr-1"}),r(" "+t(s.__("Min Free Disk")),1)]),e("td",Ge,t(Math.round(o.numbers.min_free_disk.last_24h/1048576))+" GB ",1),e("td",Ne,t(Math.round(o.numbers.min_free_disk.last_week/1048576))+" GB ",1),e("td",Oe,t(Math.round(o.numbers.min_free_disk.last_month/1048576))+" GB ",1),e("td",je,t(Math.round(o.numbers.min_free_disk.all_time/1048576))+" GB ",1)]),e("tr",null,[e("td",Ve,[a(l,{name:"toggle-off",class:"w-5 text-red-500 mr-1"}),r(" "+t(s.__("Total Restarts")),1)]),e("td",Ee,t(o.numbers.total_restarts.last_24h),1),e("td",He,t(o.numbers.total_restarts.last_week),1),e("td",ze,t(o.numbers.total_restarts.last_month),1),e("td",Je,t(o.numbers.total_restarts.all_time),1)])])])])])])])]),_:1})}const et=h(K,[["render",Ke]]);export{et as default};
