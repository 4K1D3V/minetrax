import{s as ie,r as S,x as y,y as B,z as G,A as F,B as Y,u as r,C as z,D as w,E as de,G as K,F as ue,T as pe,l as ce,o as O,c as me,w as V,b as h,a as n,t as v,i as fe,f as C,n as T,d as N,e as $,k as ye}from"./app-a8ac4c57.js";import{_ as ve}from"./AdminLayout-f0be0503.js";import{L as ge}from"./LoadingButton-8647ff24.js";import{X as be}from"./XInput-0cb865dd.js";import{X as he}from"./XSelect-da62166b.js";import{X as xe}from"./XCheckbox-658b9349.js";import{s as X}from"./vue-multiselect.esm-045543c0.js";import{t as I,H as D,o as P,K as _e,T as ke,a as E}from"./use-resolve-button-type-9135f2ee.js";import{m as L,O as we,f as Se,a as Re,P as H,N as A,T as M}from"./hidden-5d46baff.js";import"./AppLayout-45348b26.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Icon-2bf70058.js";import"./useAuthorizable-a5d67693.js";import"./open-closed-738bf598.js";import"./CloudArrowDownIcon-75fdb3c7.js";import"./index-e61eeaeb.js";function Ve({container:e,accept:t,walk:o,enabled:a}){ie(()=>{let s=e.value;if(!s||a!==void 0&&!a.value)return;let p=L(e);if(!p)return;let d=Object.assign(k=>t(k),{acceptNode:t}),u=p.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,d,!1);for(;u.nextNode();)o(u.currentNode)})}function J(e={},t=null,o=[]){for(let[a,s]of Object.entries(e))Z(o,Q(t,a),s);return o}function Q(e,t){return e?e+"["+t+"]":t}function Z(e,t,o){if(Array.isArray(o))for(let[a,s]of o.entries())Z(e,Q(t,a.toString()),s);else o instanceof Date?e.push([t,o.toISOString()]):typeof o=="boolean"?e.push([t,o?"1":"0"]):typeof o=="string"?e.push([t,o]):typeof o=="number"?e.push([t,`${o}`]):o==null?e.push([t,""]):J(o,t,e)}function Ee(e){var t,o;let a=(t=e==null?void 0:e.form)!=null?t:e.closest("form");if(a){for(let s of a.elements)if(s!==e&&(s.tagName==="INPUT"&&s.type==="submit"||s.tagName==="BUTTON"&&s.type==="submit"||s.nodeName==="INPUT"&&s.type==="image")){s.click();return}(o=a.requestSubmit)==null||o.call(a)}}function Oe(e,t,o){let a=S(o==null?void 0:o.value),s=y(()=>e.value!==void 0);return[y(()=>s.value?e.value:a.value),function(p){return s.value||(a.value=p),t==null?void 0:t(p)}]}let Ce=Symbol("DescriptionContext");function ee({slot:e=S({}),name:t="Description",props:o={}}={}){let a=S([]);function s(p){return a.value.push(p),()=>{let d=a.value.indexOf(p);d!==-1&&a.value.splice(d,1)}}return B(Ce,{register:s,slot:e,name:t,props:o}),y(()=>a.value.length>0?a.value.join(" "):void 0)}let te=Symbol("LabelContext");function ae(){let e=z(te,null);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,ae),t}return e}function re({slot:e={},name:t="Label",props:o={}}={}){let a=S([]);function s(p){return a.value.push(p),()=>{let d=a.value.indexOf(p);d!==-1&&a.value.splice(d,1)}}return B(te,{register:s,slot:e,name:t,props:o}),y(()=>a.value.length>0?a.value.join(" "):void 0)}let Te=G({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-label-${I()}`}},setup(e,{slots:t,attrs:o}){let a=ae();return F(()=>Y(a.register(e.id))),()=>{let{name:s="Label",slot:p={},props:d={}}=a,{id:u,passive:k,...i}=e,R={...Object.entries(d).reduce((b,[x,_])=>Object.assign(b,{[x]:r(_)}),{}),id:u};return k&&(delete R.onClick,delete R.htmlFor,delete i.onClick),D({ourProps:R,theirProps:i,slot:p,attrs:o,slots:t,name:s})}}});function Ne(e,t){return e===t}let le=Symbol("RadioGroupContext");function oe(e){let t=z(le,null);if(t===null){let o=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,oe),o}return t}let $e=G({name:"RadioGroup",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"div"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Ne},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-radiogroup-${I()}`}},inheritAttrs:!1,setup(e,{emit:t,attrs:o,slots:a,expose:s}){let p=S(null),d=S([]),u=re({name:"RadioGroupLabel"}),k=ee({name:"RadioGroupDescription"});s({el:p,$el:p});let[i,R]=Oe(y(()=>e.modelValue),l=>t("update:modelValue",l),y(()=>e.defaultValue)),b={options:d,value:i,disabled:y(()=>e.disabled),firstOption:y(()=>d.value.find(l=>!l.propsRef.disabled)),containsCheckedOption:y(()=>d.value.some(l=>b.compare(w(l.propsRef.value),w(e.modelValue)))),compare(l,m){if(typeof e.by=="string"){let c=e.by;return(l==null?void 0:l[c])===(m==null?void 0:m[c])}return e.by(l,m)},change(l){var m;if(e.disabled||b.compare(w(i.value),w(l)))return!1;let c=(m=d.value.find(g=>b.compare(w(g.propsRef.value),w(l))))==null?void 0:m.propsRef;return c!=null&&c.disabled?!1:(R(l),!0)},registerOption(l){d.value.push(l),d.value=we(d.value,m=>m.element)},unregisterOption(l){let m=d.value.findIndex(c=>c.id===l);m!==-1&&d.value.splice(m,1)}};B(le,b),Ve({container:y(()=>P(p)),accept(l){return l.getAttribute("role")==="radio"?NodeFilter.FILTER_REJECT:l.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(l){l.setAttribute("role","none")}});function x(l){if(!p.value||!p.value.contains(l.target))return;let m=d.value.filter(c=>c.propsRef.disabled===!1).map(c=>c.element);switch(l.key){case E.Enter:Ee(l.currentTarget);break;case E.ArrowLeft:case E.ArrowUp:if(l.preventDefault(),l.stopPropagation(),H(m,A.Previous|A.WrapAround)===M.Success){let c=d.value.find(g=>{var f;return g.element===((f=L(p))==null?void 0:f.activeElement)});c&&b.change(c.propsRef.value)}break;case E.ArrowRight:case E.ArrowDown:if(l.preventDefault(),l.stopPropagation(),H(m,A.Next|A.WrapAround)===M.Success){let c=d.value.find(g=>{var f;return g.element===((f=L(g.element))==null?void 0:f.activeElement)});c&&b.change(c.propsRef.value)}break;case E.Space:{l.preventDefault(),l.stopPropagation();let c=d.value.find(g=>{var f;return g.element===((f=L(g.element))==null?void 0:f.activeElement)});c&&b.change(c.propsRef.value)}break}}let _=y(()=>{var l;return(l=P(p))==null?void 0:l.closest("form")});return F(()=>{de([_],()=>{if(!_.value||e.defaultValue===void 0)return;function l(){b.change(e.defaultValue)}return _.value.addEventListener("reset",l),()=>{var m;(m=_.value)==null||m.removeEventListener("reset",l)}},{immediate:!0})}),()=>{let{disabled:l,name:m,id:c,form:g,...f}=e,q={ref:p,id:c,role:"radiogroup","aria-labelledby":u.value,"aria-describedby":k.value,onKeydown:x};return K(ue,[...m!=null&&i.value!=null?J({[m]:i.value}).map(([j,U])=>K(Se,_e({features:Re.Hidden,key:j,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:g,name:j,value:U}))):[],D({ourProps:q,theirProps:{...o,...ke(f,["modelValue","defaultValue","by"])},slot:{},attrs:o,slots:a,name:"RadioGroup"})])}}});var Ae=(e=>(e[e.Empty=1]="Empty",e[e.Active=2]="Active",e))(Ae||{});let W=G({name:"RadioGroupOption",props:{as:{type:[Object,String],default:"div"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-radiogroup-option-${I()}`}},setup(e,{attrs:t,slots:o,expose:a}){let s=oe("RadioGroupOption"),p=re({name:"RadioGroupLabel"}),d=ee({name:"RadioGroupDescription"}),u=S(null),k=y(()=>({value:e.value,disabled:e.disabled})),i=S(1);a({el:u,$el:u});let R=y(()=>P(u));F(()=>s.registerOption({id:e.id,element:R,propsRef:k})),Y(()=>s.unregisterOption(e.id));let b=y(()=>{var f;return((f=s.firstOption.value)==null?void 0:f.id)===e.id}),x=y(()=>s.disabled.value||e.disabled),_=y(()=>s.compare(w(s.value.value),w(e.value))),l=y(()=>x.value?-1:_.value||!s.containsCheckedOption.value&&b.value?0:-1);function m(){var f;s.change(e.value)&&(i.value|=2,(f=P(u))==null||f.focus())}function c(){i.value|=2}function g(){i.value&=-3}return()=>{let{id:f,value:q,disabled:j,...U}=e,se={checked:_.value,disabled:x.value,active:!!(i.value&2)},ne={id:f,ref:u,role:"radio","aria-checked":_.value?"true":"false","aria-labelledby":p.value,"aria-describedby":d.value,"aria-disabled":x.value?!0:void 0,tabIndex:l.value,onClick:x.value?void 0:m,onFocus:x.value?void 0:c,onBlur:x.value?void 0:g};return D({ourProps:ne,theirProps:U,slot:se,attrs:t,slots:o,name:"RadioGroupOption"})}}}),Le=Te;const Pe={class:"max-w-6xl px-10 py-12 mx-auto"},je={class:"flex justify-between mb-8"},Ue={class:"text-3xl font-bold text-gray-500 dark:text-gray-300"},Be={class:"mt-10 sm:mt-0"},Ge={class:"mt-5 md:mt-0 md:col-span-2"},Fe=["onSubmit"],Ie={class:"shadow sm:rounded-md"},De={class:"px-4 py-5 bg-white dark:bg-cool-gray-800 sm:p-6"},qe={class:"grid grid-cols-6 gap-6"},Ke={class:"col-span-6 sm:col-span-6"},Xe={class:"flex items-center justify-center"},He=["checked"],Me={class:"ms-2"},We={class:"flex items-center justify-center"},Ye=["checked"],ze={class:"ms-2"},Je={class:"col-span-6 sm:col-span-6"},Qe={key:0,class:"flex flex-col items-end mb-2"},Ze={class:"text-gray-700 dark:text-gray-300 text-sm font-semibold"},et={class:"text-sm text-right text-gray-600 dark:text-gray-400"},tt=n("code",{class:"text-sm bg-gray-100 dark:bg-cool-gray-700 dark:text-gray-300 p-1 rounded-md"},"{PLAYER_USERNAME}",-1),at=n("code",{class:"text-sm bg-gray-100 dark:bg-cool-gray-700 dark:text-gray-300 p-1 rounded-md"},"{PLAYER_UUID}",-1),rt={class:"col-span-6 sm:col-span-6"},lt={class:"mb-2 text-gray-700 dark:text-gray-300 font-semibold"},ot={class:"text-sm text-red-500 mt-0.5"},st={key:0,class:"col-span-6 sm:col-span-6"},nt={class:"mb-2 text-gray-700 dark:text-gray-300 font-semibold"},it={key:1,class:"col-span-6 sm:col-span-6"},dt={class:"mb-2 text-gray-700 dark:text-gray-300 font-semibold"},ut={class:"text-sm text-red-500 mt-0.5"},pt={key:2,class:"col-span-6 sm:col-span-6"},ct={class:"flex justify-end px-4 py-3 bg-gray-50 dark:bg-cool-gray-800 sm:px-6"},Ct={__name:"CreateCommandQueue",props:{servers:{type:Array},players:{type:Array}},setup(e){const{__:t}=ye(),o={all:"All - for every player in system",linked:"Linked Only - for every player who are linked to a user account",unlinked:"Unlinked Only - for every player who are not linked to a user account",custom:"Custom - select players from dropdown"},a=pe({scope:"global",command:"",servers:[],players:{scope:"all",is_player_online_required:!1,id:[]}});function s({name:d,hostname:u}){return`${d} - ${u}`}const p=()=>{a.post(route("admin.command-queue.store"),{preserveScroll:!0,onSuccess:()=>{a.reset("command","servers","players")}})};return(d,u)=>{const k=ce("app-head");return O(),me(ve,null,{default:V(()=>[h(k,{title:"Run Command"}),n("div",Pe,[n("div",je,[n("h1",Ue,v(r(t)("Run Command")),1)]),n("div",Be,[n("div",Ge,[n("form",{onSubmit:fe(p,["prevent"])},[n("div",Ie,[n("div",De,[n("div",qe,[n("div",Ke,[h(r($e),{modelValue:r(a).scope,"onUpdate:modelValue":u[0]||(u[0]=i=>r(a).scope=i),class:"flex justify-between gap-2"},{default:V(()=>[h(r(Le),{class:"flex items-center flex-none w-1/12 font-semibold text-gray-700 dark:text-gray-300"},{default:V(()=>[C(v(r(t)("Scope")),1)]),_:1}),h(r(W),{class:"flex-1 text-sm text-center uppercase",value:"global"},{default:V(({checked:i})=>[n("div",{class:T(["p-3 rounded shadow-sm cursor-pointer",i?"dark:bg-gray-900 dark:text-gray-200 font-bold bg-sky-400 text-white":"dark:bg-gray-600 dark:text-gray-300 bg-gray-200 text-gray-700"])},[n("div",Xe,[n("input",{checked:i,type:"radio",disabled:"",class:"w-4 h-4 bg-gray-100 border-gray-300 text-sky-600 focus:ring-sky-500 dark:focus:ring-sky-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,He),n("label",Me,v(r(t)("Global")),1)]),n("div",null,[n("span",{class:T([i?"text-gray-200 dark:text-gray-400":"text-gray-400","text-xs"])},v(r(t)("Run generic command")),3)])],2)]),_:1}),h(r(W),{class:"flex-1 text-sm text-center uppercase",value:"player"},{default:V(({checked:i})=>[n("div",{class:T(["p-3 rounded shadow-sm cursor-pointer",i?"dark:bg-gray-900 dark:text-gray-200 font-bold bg-sky-400 text-white":"dark:bg-gray-600 dark:text-gray-300 bg-gray-200 text-gray-700"])},[n("div",We,[n("input",{checked:i,type:"radio",disabled:"",class:"w-4 h-4 bg-gray-100 border-gray-300 text-sky-600 focus:ring-sky-500 dark:focus:ring-sky-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,Ye),n("label",ze,v(r(t)("Player")),1)]),n("div",null,[n("span",{class:T([i?"text-gray-200 dark:text-gray-400":"text-gray-400","text-xs"])},v(r(t)("Run against players")),3)])],2)]),_:1})]),_:1},8,["modelValue"])]),n("div",Je,[r(a).scope==="player"?(O(),N("div",Qe,[n("h3",Ze,v(r(t)("Available Placeholders")),1),n("ol",et,[n("li",null,[tt,C(" - "+v(r(t)("Username of the player the command is running on.")),1)]),n("li",null,[at,C(" - "+v(r(t)("Unique Id of the player the command is running on.")),1)])])])):$("",!0),h(be,{id:"command",modelValue:r(a).command,"onUpdate:modelValue":u[1]||(u[1]=i=>r(a).command=i),label:r(t)("Enter command to run..."),error:r(a).errors.command,type:"text",name:"command","help-error-flex":"flex-row"},null,8,["modelValue","label","error"])]),n("div",rt,[n("p",lt,v(r(t)("Servers to run on")),1),h(r(X),{modelValue:r(a).servers,"onUpdate:modelValue":u[2]||(u[2]=i=>r(a).servers=i),class:"block w-full border-gray-900 rounded-md shadow-sm focus:ring-light-blue-500 focus:border-light-blue-500 sm:text-sm",options:e.servers,"custom-label":s,"track-by":"id",multiple:!0,"close-on-select":!1,"clear-on-select":!1,searchable:!1,placeholder:r(t)("Leave empty to run on all servers")+"..."},null,8,["modelValue","options","placeholder"]),n("p",ot,v(r(a).errors.servers),1)]),r(a).scope==="player"?(O(),N("div",st,[n("p",nt,v(r(t)("Players to run on")),1),h(he,{id:"players.scope",modelValue:r(a).players.scope,"onUpdate:modelValue":u[3]||(u[3]=i=>r(a).players.scope=i),error:r(a).errors["players.scope"],name:"players.scope",label:r(t)("Players to run on"),"select-list":o},null,8,["modelValue","error","label"])])):$("",!0),r(a).players.scope==="custom"&&r(a).scope==="player"?(O(),N("div",it,[n("p",dt,v(r(t)("Select players")),1),h(r(X),{modelValue:r(a).players.id,"onUpdate:modelValue":u[4]||(u[4]=i=>r(a).players.id=i),class:"block w-full border-gray-900 rounded-md shadow-sm focus:ring-light-blue-500 focus:border-light-blue-500 sm:text-sm",options:e.players,label:"username","track-by":"id",multiple:!0,"close-on-select":!1,"clear-on-select":!1,searchable:!1,placeholder:r(t)("Select players to run command on")+"..."},null,8,["modelValue","options","placeholder"]),n("p",ut,v(r(a).errors["players.id"]),1)])):$("",!0),r(a).scope==="player"?(O(),N("div",pt,[h(xe,{id:"players.is_player_online_required",modelValue:r(a).players.is_player_online_required,"onUpdate:modelValue":u[5]||(u[5]=i=>r(a).players.is_player_online_required=i),label:r(t)("Require player to be online"),help:r(t)("This command should only run if player is online on running server. If not online it will be queued to run when player comes online."),name:"players.is_player_online_required",error:r(a).errors["players.is_player_online_required"]},null,8,["modelValue","label","help","error"])])):$("",!0)])]),n("div",ct,[h(ge,{loading:r(a).processing,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",type:"submit"},{default:V(()=>[C(v(r(t)("Run Command")),1)]),_:1},8,["loading"])])])],40,Fe)])])])]),_:1})}}};export{Ct as default};
