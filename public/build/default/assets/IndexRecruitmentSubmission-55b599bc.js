import{r as O,x as T,y as V,l as B,q as R,o as m,c as f,w as o,k as C,b as a,u as t,_ as I,a as r,t as i,B as N,p as q,f as b,j as x,e as E,O as $,A as L}from"./app-0b9725b5.js";import{u as z}from"./AppLayout-71437c13.js";import{_ as F}from"./AdminLayout-22bfd88d.js";import{D as p,_ as U}from"./DtRowItem-f9341065.js";import{u as X}from"./useAuthorizable-663b53e2.js";import{X as H}from"./XSelect-82fe7c31.js";import{_ as G}from"./RecruitmentStatusBadge-df200500.js";import{r as J}from"./EyeIcon-ccceede6.js";import{r as K}from"./TrashIcon-77a86449.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Icon-b9bd5b83.js";import"./use-resolve-button-type-7b74f3df.js";import"./CloudArrowDownIcon-98e13329.js";import"./index-970c465b.js";import"./XMarkIcon-b1850349.js";const M={class:"p-4 mx-auto space-y-4 px-10"},P={class:"flex items-center justify-between"},Q={class:"text-xl font-extrabold text-gray-800 dark:text-gray-200"},W={class:"text-sm px-4 font-medium text-left text-gray-800 whitespace-nowrap dark:text-gray-200"},Y={class:"px-4"},Z={class:"flex-shrink-0 h-10 w-10 mr-2"},ee=["src"],te={class:"flex-col"},se={class:"text-sm text-gray-500"},re={class:"px-6 py-4 space-x-2 text-sm font-medium text-right whitespace-nowrap"},we={__name:"IndexRecruitmentSubmission",props:{forms:{type:Object},filters:{type:Object},submissions:{type:Object},closed:{type:Boolean,default:!1}},setup(n){var g,k,v;const c=n,{can:D}=X(),{__:s}=C(),{formatTimeAgoToNow:w,formatToDayDateString:y}=z(),A=[{key:"id",label:s("ID"),sortable:!0,class:"text-left w-[5%]"},{key:"user_id",sortable:!0,label:s("Applicant"),class:"w-3/12"},{key:"recruitment_id",label:s("Recruitment"),sortable:!0},{key:"status",label:s("Status"),sortable:!0},{key:"created_at",label:s("Created At"),class:"text-right w-1/12 whitespace-nowrap",sortable:!0},{key:"updated_at",label:s("Updated At"),class:"text-right w-1/12 whitespace-nowrap",sortable:!0},{key:"actions",label:s("Actions"),sortable:!1,class:"w-1/12 text-right"}];let u=O((k=(g=c.filters)==null?void 0:g.forms)!=null&&k.length?(v=c.filters)==null?void 0:v.forms[0]:null);const S=T(()=>c.filters.forms&&c.filters.forms.length>0?c.filters.forms.map(l=>c.forms[l]).join(", "):null);return V(u,l=>{const d={forms:l?[l]:null};$.get(route(route().current()),L.pickBy(d))}),(l,d)=>{const h=B("InertiaLink"),_=R("tippy"),j=R("confirm");return m(),f(F,null,{default:o(()=>[a(I,{title:n.closed?t(s)("Closed Request - Recruitments"):t(s)("Open Requests - Recruitments")},null,8,["title"]),r("div",M,[r("div",P,[r("h3",Q,i(n.closed?t(s)("Closed Recruitment Submissions:"):t(s)("Open Recruitment Submissions:"))+" "+i(S.value??t(s)("All Recruitments")),1),a(H,{id:"selectForms",modelValue:t(u),"onUpdate:modelValue":d[0]||(d[0]=e=>N(u)?u.value=e:u=e),name:"selectForms","select-list":n.forms,placeholder:t(s)("All Recruitments"),class:"w-48 max-w-48 dark:border dark:rounded dark:border-gray-700"},null,8,["modelValue","select-list","placeholder"])]),r("div",null,[a(U,{class:"bg-white rounded shadow dark:bg-gray-800",header:A,data:n.submissions,filters:n.filters},{default:o(({item:e})=>[r("td",W,i(e.id),1),r("td",Y,[a(h,{href:l.route("user.public.get",e.user.username),class:"flex items-center"},{default:o(()=>[r("div",Z,[r("img",{class:"h-10 w-10 rounded-full",src:e.user.profile_photo_url,alt:"Avatar"},null,8,ee)]),r("div",te,[r("div",{class:"text-sm font-semibold text-gray-900 dark:text-gray-300 whitespace-nowrap truncate",style:q([e.user.roles[0].color?{color:e.user.roles[0].color}:null])},i(e.user.name),5),r("div",se," @"+i(e.user.username),1)])]),_:2},1032,["href"])]),a(p,null,{default:o(()=>[b(i(e.recruitment.title),1)]),_:2},1024),a(p,null,{default:o(()=>[a(G,{status:e.status.value},null,8,["status"])]),_:2},1024),x((m(),f(p,{class:"text-right whitespace-nowrap",content:t(y)(e.created_at)},{default:o(()=>[b(i(t(w)(e.created_at)),1)]),_:2},1032,["content"])),[[_]]),x((m(),f(p,{class:"text-right whitespace-nowrap",content:t(y)(e.updated_at)},{default:o(()=>[b(i(t(w)(e.updated_at)),1)]),_:2},1032,["content"])),[[_]]),r("td",re,[a(h,{as:"a",href:l.route("admin.recruitment-submission.show",e.id),class:"inline-flex items-center justify-center text-blue-500 hover:text-blue-800"},{default:o(()=>[a(t(J),{class:"inline-block w-5 h-5"})]),_:2},1032,["href"]),t(D)("delete recruitment_submissions")&&n.closed?x((m(),f(h,{key:0,as:"button",method:"DELETE",href:l.route("admin.recruitment-submission.delete",e.id),class:"inline-flex items-center justify-center text-red-600 hover:text-red-900 focus:outline-none",title:t(s)("Delete Submission")},{default:o(()=>[a(t(K),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[j,{message:"Delete this Recruitment Submission? This action cannot be undone."}],[_]]):E("",!0)])]),_:1},8,["data","filters"])])])]),_:1})}}};export{we as default};
