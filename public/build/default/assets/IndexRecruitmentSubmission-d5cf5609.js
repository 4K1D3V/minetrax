import{r as O,x as T,E as V,l as B,q as D,o as i,c as d,w as r,k as E,b as l,u as e,_ as I,a,t as o,J as S,p as L,j as x,d as b,f as g,e as $,O as z,I as F}from"./app-98f14b57.js";import{u as U}from"./AppLayout-0fa35dec.js";import{_ as X}from"./AdminLayout-cad658e6.js";import{D as m,_ as H}from"./DtRowItem-6d49a4d4.js";import{u as J}from"./useAuthorizable-232b6833.js";import{X as G}from"./XSelect-5d5ebcba.js";import{_ as K}from"./CommonStatusBadge-9b9d3d02.js";import{_ as j}from"./UserDisplayname-5d567c94.js";import{r as M}from"./EyeIcon-171770cc.js";import{r as P}from"./TrashIcon-b6deeee8.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Icon-6fcacfb2.js";import"./use-resolve-button-type-f1accb1e.js";import"./open-closed-886a7985.js";import"./CloudArrowDownIcon-1c4f23b0.js";import"./index-45348e7f.js";import"./vue-multiselect.esm-40ab72e4.js";import"./XMarkIcon-e7af00fc.js";import"./hidden-7c3bc953.js";const Q={class:"p-4 mx-auto space-y-4 px-10"},W={class:"flex items-center justify-between"},Y={class:"text-xl font-extrabold text-gray-800 dark:text-gray-200"},Z={class:"text-sm px-4 font-medium text-left text-gray-800 whitespace-nowrap dark:text-gray-200"},tt={class:"px-4"},et={class:"flex-shrink-0 h-10 w-10 mr-2"},st=["src"],at={class:"flex-col"},rt={class:"text-sm text-gray-500"},lt=["title"],ot={class:"text-xs text-gray-400 dark:text-gray-500"},it={key:1,class:"text-gray-400 text-sm italic"},nt={class:"text-xs text-gray-400 dark:text-gray-500"},ct={key:1,class:"text-gray-400 text-sm italic"},ut={class:"px-6 py-4 space-x-2 text-sm font-medium text-right whitespace-nowrap"},Nt={__name:"IndexRecruitmentSubmission",props:{forms:{type:Object},filters:{type:Object},submissions:{type:Object},closed:{type:Boolean,default:!1}},setup(c){var k,v,A;const u=c,{can:R}=J(),{__:s}=E(),{formatTimeAgoToNow:f,formatToDayDateString:w}=U(),C=[{key:"id",label:s("ID"),sortable:!0,class:"text-left w-[5%]"},{key:"user_id",sortable:!0,label:s("Applicant"),class:"w-3/12",filterable:{key:"user.name",type:"text"}},{key:"recruitment_id",label:s("Application"),sortable:!0},{key:"status",label:s("Status"),sortable:!0,filterable:{type:"multiselect",options:["pending","inprogress","approved","rejected","withdrawn","onhold"]}},{key:"last_act_at",sortable:!0,label:s("Last Actor"),class:"text-right",filterable:{key:"lastActor.name",type:"text"}},{key:"last_comment_at",sortable:!0,label:s("Last Comment"),class:"text-right",filterable:{key:"lastCommentor.name",type:"text"}},{key:"created_at",label:s("Created At"),class:"text-right w-1/12 whitespace-nowrap",sortable:!0},{key:"updated_at",label:s("Updated At"),class:"text-right w-1/12 whitespace-nowrap",sortable:!0},{key:"actions",label:s("Actions"),sortable:!1,class:"w-1/12 text-right"}];let p=O((v=(k=u.filters)==null?void 0:k.forms)!=null&&v.length?(A=u.filters)==null?void 0:A.forms[0]:null);const q=T(()=>u.filters.forms&&u.filters.forms.length>0?u.filters.forms.map(n=>u.forms[n]).join(", "):null);return V(p,n=>{const _={forms:n?[n]:null};z.get(route(route().current()),F.pickBy(_))}),(n,_)=>{const y=B("InertiaLink"),h=D("tippy"),N=D("confirm");return i(),d(X,null,{default:r(()=>[l(I,{title:c.closed?e(s)("Closed Request - Applications"):e(s)("Open Requests - Applications")},null,8,["title"]),a("div",Q,[a("div",W,[a("h3",Y,o(c.closed?e(s)("Closed Requests:"):e(s)("Open Requests:"))+" "+o(q.value??e(s)("All Applications")),1),l(G,{id:"selectForms",modelValue:e(p),"onUpdate:modelValue":_[0]||(_[0]=t=>S(p)?p.value=t:p=t),name:"selectForms","select-list":c.forms,placeholder:e(s)("All Applications"),class:"w-48 max-w-48 dark:border dark:rounded dark:border-gray-700"},null,8,["modelValue","select-list","placeholder"])]),a("div",null,[l(H,{class:"bg-white rounded shadow dark:bg-gray-800",header:C,data:c.submissions,filters:c.filters},{default:r(({item:t})=>[a("td",Z,o(t.id),1),a("td",tt,[l(y,{href:n.route("user.public.get",t.user.username),class:"flex items-center"},{default:r(()=>[a("div",et,[a("img",{class:"h-10 w-10 rounded-full",src:t.user.profile_photo_url,alt:"Avatar"},null,8,st)]),a("div",at,[a("div",{class:"text-sm font-semibold text-gray-900 dark:text-gray-300 whitespace-nowrap truncate",style:L([t.user.roles[0].color?{color:t.user.roles[0].color}:null])},o(t.user.name),5),a("div",rt," @"+o(t.user.username),1)])]),_:2},1032,["href"])]),l(m,null,{default:r(()=>[x((i(),b("p",{title:t.recruitment.title,class:"truncate w-32"},[g(o(t.recruitment.title),1)],8,lt)),[[h]])]),_:2},1024),l(m,null,{default:r(()=>[l(K,{status:t.status.value},null,8,["status"])]),_:2},1024),l(m,{class:"text-right whitespace-nowrap"},{default:r(()=>[t.last_actor?(i(),d(j,{key:0,"text-class":"text-sm text-gray-700 dark:text-gray-400",user:t.last_actor,"show-badges":!0},{default:r(()=>[a("div",ot,o(e(f)(t.last_act_at)),1)]),_:2},1032,["user"])):(i(),b("span",it,o(e(s)("None")),1))]),_:2},1024),l(m,{class:"text-right whitespace-nowrap"},{default:r(()=>[t.last_commentor?(i(),d(j,{key:0,"text-class":"text-sm text-gray-700 dark:text-gray-400",user:t.last_commentor,"show-badges":!0},{default:r(()=>[a("div",nt,o(e(f)(t.last_comment_at)),1)]),_:2},1032,["user"])):(i(),b("span",ct,o(e(s)("None")),1))]),_:2},1024),x((i(),d(m,{class:"text-right whitespace-nowrap",content:e(w)(t.created_at)},{default:r(()=>[g(o(e(f)(t.created_at)),1)]),_:2},1032,["content"])),[[h]]),x((i(),d(m,{class:"text-right whitespace-nowrap",content:e(w)(t.updated_at)},{default:r(()=>[g(o(e(f)(t.updated_at)),1)]),_:2},1032,["content"])),[[h]]),a("td",ut,[l(y,{as:"a",href:n.route("admin.recruitment-submission.show",t.id),class:"inline-flex items-center justify-center text-blue-500 hover:text-blue-800"},{default:r(()=>[l(e(M),{class:"inline-block w-5 h-5"})]),_:2},1032,["href"]),e(R)("delete recruitment_submissions")&&c.closed?x((i(),d(y,{key:0,as:"button",method:"DELETE",href:n.route("admin.recruitment-submission.delete",t.id),class:"inline-flex items-center justify-center text-red-600 hover:text-red-900 focus:outline-none",title:e(s)("Delete Submission")},{default:r(()=>[l(e(P),{class:"inline-block w-5 h-5"})]),_:2},1032,["href","title"])),[[N,{message:"Delete this Request? This action cannot be undone."}],[h]]):$("",!0)])]),_:1},8,["data","filters"])])])]),_:1})}}};export{Nt as default};
