import{A as j,u as V}from"./AppLayout-0fa35dec.js";import{I as A}from"./Icon-6fcacfb2.js";import{S as B,W as N}from"./viewer-90f975be.js";import{_ as z}from"./CopyToClipboard-da0e6391.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";import{o as n,d as i,a as e,l as c,q as v,c as p,w as u,b as _,t as s,n as C,j as d,f as m,e as f,g as M,F as R}from"./app-98f14b57.js";import"./useAuthorizable-232b6833.js";function U(t,a){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{d:"M18 1.5c2.9 0 5.25 2.35 5.25 5.25v3.75a.75.75 0 01-1.5 0V6.75a3.75 3.75 0 10-7.5 0v3a3 3 0 013 3v6.75a3 3 0 01-3 3H3.75a3 3 0 01-3-3v-6.75a3 3 0 013-3h9v-3c0-2.9 2.35-5.25 5.25-5.25z"})])}function H(t,a){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M20.599 1.5c-.376 0-.743.111-1.055.32l-5.08 3.385a18.747 18.747 0 00-3.471 2.987 10.04 10.04 0 014.815 4.815 18.748 18.748 0 002.987-3.472l3.386-5.079A1.902 1.902 0 0020.599 1.5zm-8.3 14.025a18.76 18.76 0 001.896-1.207 8.026 8.026 0 00-4.513-4.513A18.75 18.75 0 008.475 11.7l-.278.5a5.26 5.26 0 013.601 3.602l.502-.278zM6.75 13.5A3.75 3.75 0 003 17.25a1.5 1.5 0 01-1.601 1.497.75.75 0 00-.7 1.123 5.25 5.25 0 009.8-2.62 3.75 3.75 0 00-3.75-3.75z","clip-rule":"evenodd"})])}const F={components:{Icon:A,AppLayout:j,LockOpenIcon:U,PaintBrushIcon:H,CopyToClipboard:z},props:{linkedPlayers:Array,maxPlayerPerUser:Number,currentLinkOtp:Object},setup(){const{formatTimeAgoToNow:t,formatToDayDateString:a}=V();return{formatTimeAgoToNow:t,formatToDayDateString:a}},data(){var t;return{skinViewers:[],otpExpiryCountdownInterval:null,otpExpiryCountdownSeconds:(t=this.currentLinkOtp)!=null&&t.expires_at?Math.floor((new Date(this.currentLinkOtp.expires_at).getTime()-new Date().getTime())/1e3):null}},unmounted(){for(const t of this.skinViewers)t.dispose();clearInterval(this.otpExpiryCountdownInterval)},mounted(){for(const t of this.linkedPlayers){let a=new B({canvas:document.getElementById(`skin_container_${t.uuid}`),width:200,height:300,skin:route("player.skin.get",{uuid:t.uuid,username:t.username,textureid:t.skin_texture_id})});a.autoRotate=!0,a.animation=new N,a.animation.speed=.1,a.autoRotateSpeed=.5,this.skinViewers.push(a)}this.startOtpExpiryCountdown()},methods:{startOtpExpiryCountdown(){this.otpExpiryCountdownSeconds>0&&(this.otpExpiryCountdownInterval=setInterval(()=>{this.otpExpiryCountdownSeconds--,this.otpExpiryCountdownSeconds<=0&&clearInterval(this.otpExpiryCountdownInterval)},1e3))}}},W={class:"max-w-6xl px-2 py-3 mx-auto space-y-4 md:py-12 md:px-10"},Y={class:"px-4 py-3 mb-4 bg-white border-t-4 rounded-b shadow dark:bg-cool-gray-800 border-light-blue-500 text-light-blue-900 dark:text-light-blue-400",role:"alert"},q={class:"flex"},G=e("div",{class:"py-1"},[e("svg",{class:"w-6 h-6 mr-4 fill-current text-light-blue-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"})])],-1),J={class:"w-full"},K={class:"font-bold"},Q={class:"flex flex-col items-center mt-2 text-sm"},X={class:"text-gray-500 dark:text-gray-400"},Z=["title","onClick"],$={key:0},tt={key:1},et={key:0,class:"italic dark:text-gray-400 mt-4"},ot={key:1},st={class:"dark:text-gray-400 mt-4"},nt={key:0,class:"flex justify-center pt-5 pb-5 pr-10"},it={class:"italic text-red-500"},rt=["id"],at={class:"flex flex-col space-y-2"},lt={class:"username"},ct={class:"text-xs text-gray-500 dark:text-gray-400"},dt={class:"flex items-center justify-between"},ut={class:"font-bold dark:text-gray-400"},_t={class:"flex items-center space-x-2 text-sm font-extrabold text-center text-light-blue-400"},ht={key:0,class:"px-2 text-lg border-2 rounded border-light-blue-300 bg-light-blue-50 dark:bg-cool-gray-800"},pt={key:1,class:"text-sm italic text-gray-500 dark:text-gray-400"},mt={class:"flex items-center justify-between"},yt={class:"font-bold dark:text-gray-400"},ft={key:1,class:"text-sm italic text-gray-500 dark:text-gray-400"},gt={class:"flex items-center justify-between"},kt={class:"font-bold dark:text-gray-400"},xt={class:"flex items-center space-x-2"},wt={key:0,class:"dark:text-gray-200"},bt={key:1,class:"text-sm italic text-gray-500 dark:text-gray-400"},vt=["src","alt","title"],Ct={class:"flex items-center justify-between"},Pt={class:"font-bold dark:text-gray-400"},Et={class:"flex items-center space-x-2"},It={class:"dark:text-gray-200"},Lt=["title","src","alt"],Ot={class:"flex items-center justify-between"},St={class:"font-bold dark:text-gray-400"},Tt={class:"flex items-center space-x-2"},jt=["title"],Vt={class:"flex justify-end space-x-4"};function At(t,a,r,g,y,Bt){const P=c("app-head"),E=c("copy-to-clipboard"),h=c("inertia-link"),I=c("icon"),L=c("PaintBrushIcon"),O=c("LockOpenIcon"),S=c("app-layout"),l=v("tippy"),T=v("confirm");return n(),p(S,null,{default:u(()=>{var k,x;return[_(P,{title:t.__("Your Linked Players")},null,8,["title"]),e("div",W,[e("div",Y,[e("div",q,[G,e("div",J,[e("p",K,s(t.__("You can link upto :count :player to your account! ( :left available )",{count:r.maxPlayerPerUser,player:r.maxPlayerPerUser===1?t.__("player"):t.__("players"),left:r.maxPlayerPerUser-r.linkedPlayers.length})),1),e("div",Q,[e("p",X,s(t.__("To link a player to your account, join server and type '/link :otp' in your chat.",{otp:(k=r.currentLinkOtp)==null?void 0:k.otp})),1),e("h1",{class:C([{"line-through":y.otpExpiryCountdownSeconds<=0},"font-mono text-6xl font-extrabold tracking-widest text-center text-black dark:text-white"])},s((x=r.currentLinkOtp)==null?void 0:x.otp),3),_(E,null,{default:u(o=>{var w;return[d((n(),i("button",{title:t.__("Click to Copy"),type:"button",class:"p-2 mt-3 font-semibold text-center font-mono tracking-wider text-gray-600 transition duration-150 ease-in-out border border-gray-200 rounded w-full md:w-1/2 dark:border-gray-700 dark:text-gray-300 hover:text-light-blue-500 dark:hover:text-light-blue-400 hover:bg-light-blue-50 dark:hover:bg-cool-gray-900 hover:border-light-blue-500 dark:hover:border-cool-gray-800 focus:ring focus:ring-light-blue-200 focus:ring-opacity-50 focus:outline-none",onClick:Nt=>{var b;return o.copy("/link "+((b=r.currentLinkOtp)==null?void 0:b.otp))}},[o.status!=="copied"?(n(),i("span",$,s("/link "+((w=r.currentLinkOtp)==null?void 0:w.otp)),1)):(n(),i("span",tt,s(t.__("Copied!")),1))],8,Z)),[[l]])]}),_:1}),y.otpExpiryCountdownSeconds>0?(n(),i("p",et,s(t.__("This OTP will expire in :seconds seconds.",{seconds:y.otpExpiryCountdownSeconds})),1)):(n(),i("div",ot,[e("p",st,[m(s(t.__("This OTP has expired. Refresh the page to get a new OTP."))+" ",1),_(h,{as:"button",href:t.route("linked-player.list"),class:"dark:text-sky-400 dark:hover:text-sky-500 text-sky-500 hover:text-sky-700 hover:underline"},{default:u(()=>[m(s(t.__("Click here to refresh.")),1)]),_:1},8,["href"])])]))])])])]),e("div",{class:C(["gap-4 space-y-2 md:grid md:space-y-0",r.linkedPlayers.length>1?"grid-cols-2":"grid-cols-1 place-items-center"])},[r.linkedPlayers.length<=0?(n(),i("div",nt,[e("p",it,s(t.__("No players linked to your account right now.")),1)])):f("",!0),(n(!0),i(R,null,M(r.linkedPlayers,o=>(n(),i("div",{key:o.uuid,class:"flex justify-center pt-5 pb-5 pr-10 bg-white rounded shadow dark:bg-cool-gray-800"},[e("canvas",{id:`skin_container_${o.uuid}`},null,8,rt),e("div",at,[e("div",lt,[_(h,{as:"a",href:t.route("player.show",o.uuid),class:"text-lg font-bold text-light-blue-400 hover:text-light-blue-500"},{default:u(()=>[m(s(o.username),1)]),_:2},1032,["href"]),e("p",ct,s(o.uuid),1)]),e("div",dt,[e("p",ut,s(t.__("Position"))+": ",1),e("div",_t,[o.position?(n(),i("span",ht,s(o.position),1)):(n(),i("span",pt,s(t.__("None")),1))])]),e("div",mt,[e("p",yt,s(t.__("Rating"))+": ",1),o.rating!=null?d((n(),p(I,{key:0,class:"w-8 h-8 focus:outline-none",name:`rating-${o.rating}`,content:o.rating},null,8,["name","content"])),[[l]]):(n(),i("p",ft,s(t.__("None")),1))]),e("div",gt,[e("p",kt,s(t.__("Rank"))+": ",1),e("div",xt,[o.rank?(n(),i("p",wt,s(o.rank.name),1)):(n(),i("p",bt,s(t.__("None")),1)),o.rank&&o.rank.photo_url?d((n(),i("img",{key:2,src:o.rank.photo_url,alt:o.rank.name,title:o.rank.name,class:"max-h-12 max-w-12 focus:outline-none"},null,8,vt)),[[l]]):f("",!0)])]),e("div",Ct,[e("p",Pt,s(t.__("Country"))+": ",1),e("div",Et,[e("p",It,s(o.country.name),1),d(e("img",{title:o.country.name,src:o.country.photo_path,alt:o.country.name,class:"h-8 w-8 -mt-0.5 focus:outline-none"},null,8,Lt),[[l]])])]),e("div",Ot,[e("p",St,s(t.__("Last Seen"))+": ",1),e("div",Tt,[d((n(),i("p",{class:"focus:outline-none dark:text-gray-200",title:g.formatToDayDateString(o.last_seen_at)},[m(s(g.formatTimeAgoToNow(o.last_seen_at)),1)],8,jt)),[[l]])])]),e("div",Vt,[t.$page.props.playerSkinChangerEnabled?d((n(),p(h,{key:0,as:"a",href:t.route("change-player-skin.show",{player_uuid:o.uuid}),class:"inline-flex justify-center px-4 py-2 mt-5 text-sm font-medium text-white border border-transparent rounded-md shadow-sm bg-sky-400 hover:bg-sky-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-400 disabled:opacity-50",title:t.__("Change Skin of this player.")},{default:u(()=>[_(L,{class:"w-5 h-5"})]),_:2},1032,["href","title"])),[[l]]):f("",!0),d((n(),p(h,{as:"button","preserve-scroll":!0,"preserve-state":!1,method:"delete",href:t.route("account-link.delete",o.uuid),class:"inline-flex justify-center px-4 py-2 mt-5 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",title:t.__("Unlink this player from your account.")},{default:u(()=>[_(O,{class:"w-5 h-5"})]),_:2},1032,["href","title"])),[[l],[T,{message:t.__("Are you sure you want to unlink this player from your account?")}]])])])]))),128))],2)])]}),_:1})}const Wt=D(F,[["render",At]]);export{Wt as default};
